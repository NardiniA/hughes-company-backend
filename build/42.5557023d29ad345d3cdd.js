(self.webpackChunkhughes_company_backend=self.webpackChunkhughes_company_backend||[]).push([[42],{6907:e=>{"use strict";e.exports=function(e){if(e=String(e||""),n.test(e))return"rtl";if(a.test(e))return"ltr";return"neutral"};var t="֑-߿יִ-﷽ﹰ-ﻼ",r="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",n=new RegExp("^[^"+r+"]*["+t+"]"),a=new RegExp("^[^"+t+"]*["+r+"]")},18156:(e,t)=>{"use strict";for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},a={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},l=1;l<20;l++)o["f"+l]=111+l;function i(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map((function(e){return s(e,t)})),a=function(e){return n.some((function(t){return d(t,e)}))};return null==r?a:a(r)}function s(e,t){var r=t&&t.byKey,l={},i=(e=e.replace("++","+add")).split("+"),s=i.length;for(var d in n)l[n[d]]=!1;var f=!0,h=!1,m=void 0;try{for(var p,v=i[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value,E=g.endsWith("?")&&g.length>1;E&&(g=g.slice(0,-1));var w=u(g),b=n[w];if(g.length>1&&!b&&!a[g]&&!o[w])throw new TypeError('Unknown modifier: "'+g+'"');1!==s&&b||(r?l.key=w:l.which=c(g)),b&&(l[b]=!E||null)}}catch(e){h=!0,m=e}finally{try{!f&&v.return&&v.return()}finally{if(h)throw m}}return l}function d(e,t){for(var r in e){var n=e[r],a=void 0;if(null!=n&&((null!=(a="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&a!==n))return!1}return!0}function c(e){return e=u(e),o[e]||e.toUpperCase().charCodeAt(0)}function u(e){return e=e.toLowerCase(),e=a[e]||e}t.ZP=i},62705:(e,t,r)=>{var n=r(55639).Symbol;e.exports=n},44239:(e,t,r)=>{var n=r(62705),a=r(89607),o=r(2333),l=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?a(e):o(e)}},27561:(e,t,r)=>{var n=r(67990),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},31957:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},89607:(e,t,r)=>{var n=r(62705),a=Object.prototype,o=a.hasOwnProperty,l=a.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,i),r=e[i];try{e[i]=void 0;var n=!0}catch(e){}var a=l.call(e);return n&&(t?e[i]=r:delete e[i]),a}},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},55639:(e,t,r)=>{var n=r(31957),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},67990:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},23279:(e,t,r)=>{var n=r(13218),a=r(7771),o=r(14841),l=Math.max,i=Math.min;e.exports=function(e,t,r){var s,d,c,u,f,h,m=0,p=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function E(t){var r=s,n=d;return s=d=void 0,m=t,u=e.apply(n,r)}function w(e){return m=e,f=setTimeout(y,t),p?E(e):u}function b(e){var r=e-h;return void 0===h||r>=t||r<0||v&&e-m>=c}function y(){var e=a();if(b(e))return x(e);f=setTimeout(y,function(e){var r=t-(e-h);return v?i(r,c-(e-m)):r}(e))}function x(e){return f=void 0,g&&s?E(e):(s=d=void 0,u)}function k(){var e=a(),r=b(e);if(s=arguments,d=this,h=e,r){if(void 0===f)return w(h);if(v)return clearTimeout(f),f=setTimeout(y,t),E(h)}return void 0===f&&(f=setTimeout(y,t)),u}return t=o(t)||0,n(r)&&(p=!!r.leading,c=(v="maxWait"in r)?l(o(r.maxWait)||0,t):c,g="trailing"in r?!!r.trailing:g),k.cancel=function(){void 0!==f&&clearTimeout(f),m=0,s=h=d=f=void 0},k.flush=function(){return void 0===f?u:x(a())},k}},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},33448:(e,t,r)=>{var n=r(44239),a=r(37005);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},7771:(e,t,r)=>{var n=r(55639);e.exports=function(){return n.Date.now()}},23493:(e,t,r)=>{var n=r(23279),a=r(13218);e.exports=function(e,t,r){var o=!0,l=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(r)&&(o="leading"in r?!!r.leading:o,l="trailing"in r?!!r.trailing:l),n(e,t,{leading:o,maxWait:t,trailing:l})}},14841:(e,t,r)=>{var n=r(27561),a=r(13218),o=r(33448),l=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=i.test(e);return r||s.test(e)?d(e.slice(2),r?2:8):l.test(e)?NaN:+e}},5179:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>oa});var n=r(67294),a=r(18156),o=r(94822),l=r(6907),i=r.n(l),s=r(23279),d=r.n(s),c=r(23493),u=r.n(c);function f(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function h(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function m(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return h(r.overflowY,t)||h(r.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function p(e,t,r,n,a,o,l,i){return o<e&&l>t||o>e&&l<t?0:o<=e&&i<=r||l>=t&&i>=r?o-e-n:l>t&&i<r||o<e&&i>r?l-t+a:0}var v=function(e,t){var r=window,n=t.scrollMode,a=t.block,o=t.inline,l=t.boundary,i=t.skipOverflowHiddenElements,s="function"==typeof l?l:function(e){return e!==l};if(!f(e))throw new TypeError("Invalid target");for(var d,c,u=document.scrollingElement||document.documentElement,h=[],v=e;f(v)&&s(v);){if((v=null==(c=(d=v).parentElement)?d.getRootNode().host||null:c)===u){h.push(v);break}null!=v&&v===document.body&&m(v)&&!m(document.documentElement)||null!=v&&m(v,i)&&h.push(v)}for(var g=r.visualViewport?r.visualViewport.width:innerWidth,E=r.visualViewport?r.visualViewport.height:innerHeight,w=window.scrollX||pageXOffset,b=window.scrollY||pageYOffset,y=e.getBoundingClientRect(),x=y.height,k=y.width,C=y.top,N=y.right,T=y.bottom,D=y.left,O="start"===a||"nearest"===a?C:"end"===a?T:C+x/2,S="center"===o?D+k/2:"end"===o?N:D,M=[],B=0;B<h.length;B++){var R=h[B],P=R.getBoundingClientRect(),L=P.height,F=P.width,_=P.top,j=P.right,A=P.bottom,W=P.left;if("if-needed"===n&&C>=0&&D>=0&&T<=E&&N<=g&&C>=_&&T<=A&&D>=W&&N<=j)return M;var z=getComputedStyle(R),H=parseInt(z.borderLeftWidth,10),$=parseInt(z.borderTopWidth,10),I=parseInt(z.borderRightWidth,10),V=parseInt(z.borderBottomWidth,10),U=0,Z=0,q="offsetWidth"in R?R.offsetWidth-R.clientWidth-H-I:0,K="offsetHeight"in R?R.offsetHeight-R.clientHeight-$-V:0,J="offsetWidth"in R?0===R.offsetWidth?0:F/R.offsetWidth:0,Y="offsetHeight"in R?0===R.offsetHeight?0:L/R.offsetHeight:0;if(u===R)U="start"===a?O:"end"===a?O-E:"nearest"===a?p(b,b+E,E,$,V,b+O,b+O+x,x):O-E/2,Z="start"===o?S:"center"===o?S-g/2:"end"===o?S-g:p(w,w+g,g,H,I,w+S,w+S+k,k),U=Math.max(0,U+b),Z=Math.max(0,Z+w);else{U="start"===a?O-_-$:"end"===a?O-A+V+K:"nearest"===a?p(_,A,L,$,V+K,O,O+x,x):O-(_+L/2)+K/2,Z="start"===o?S-W-H:"center"===o?S-(W+F/2)+q/2:"end"===o?S-j+I+q:p(W,j,F,H,I+q,S,S+k,k);var X=R.scrollLeft,Q=R.scrollTop;O+=Q-(U=Math.max(0,Math.min(Q+U/Y,R.scrollHeight-L/Y+K))),S+=X-(Z=Math.max(0,Math.min(X+Z/J,R.scrollWidth-F/J+q)))}M.push({el:R,top:U,left:Z})}return M};function g(e){return e===Object(e)&&0!==Object.keys(e).length}const E=function(e,t){var r=e.isConnected||e.ownerDocument.documentElement.contains(e);if(g(t)&&"function"==typeof t.behavior)return t.behavior(r?v(e,t):[]);if(r){var n=function(e){return!1===e?{block:"end",inline:"nearest"}:g(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach((function(e){var n=e.el,a=e.top,o=e.left;n.scroll&&r?n.scroll({top:a,left:o,behavior:t}):(n.scrollTop=a,n.scrollLeft=o)}))}(v(e,n),n.behavior)}};var w=r(59619),b=r(73935);function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var k="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,C="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),N="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),T="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),D="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),O="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),S="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),M="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),B="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),R="undefined"!=typeof navigator&&/.*QQBrowser/.test(navigator.userAgent),P="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),L="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent),F=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),_=!M&&!O&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,j=F?n.useLayoutEffect:n.useEffect,A=e=>{var{isLast:t,leaf:r,parent:a,text:l}=e,i=ge(),s=ot.findPath(i,l),d=o.Path.parent(s);return i.isVoid(a)?n.createElement(z,{length:o.Node.string(a).length}):""!==r.text||a.children[a.children.length-1]!==l||i.isInline(a)||""!==o.Editor.string(i,d)?""===r.text?n.createElement(z,null):t&&"\n"===r.text.slice(-1)?n.createElement(W,{isTrailing:!0,text:r.text}):n.createElement(W,{text:r.text}):n.createElement(z,{isLineBreak:!0})},W=e=>{var{text:t,isTrailing:r=!1}=e,a=(0,n.useRef)(null),o=()=>"".concat(null!=t?t:"").concat(r?"\n":"");return j((()=>{var e=o();a.current&&a.current.textContent!==e&&(a.current.textContent=e)})),a.current?n.createElement("span",{"data-slate-string":!0,ref:a}):n.createElement("span",{"data-slate-string":!0,ref:a},o())},z=e=>{var{length:t=0,isLineBreak:r=!1}=e;return n.createElement("span",{"data-slate-zero-width":r?"n":"z","data-slate-length":t},"\ufeff",r?n.createElement("br",null):null)},H=new WeakMap,$=new WeakMap,I=new WeakMap,V=new WeakMap,U=new WeakMap,Z=new WeakMap,q=new WeakMap,K=new WeakMap,J=new WeakMap,Y=new WeakMap,X=new WeakMap,Q=new WeakMap,G=new WeakMap,ee=new WeakMap,te=new WeakMap,re=Symbol("placeholder"),ne=e=>{var{leaf:t,isLast:r,text:a,parent:o,renderPlaceholder:l,renderLeaf:i=(e=>n.createElement(oe,Object.assign({},e)))}=e,s=(0,n.useRef)(null);(0,n.useEffect)((()=>{var e=null==s?void 0:s.current,t=document.querySelector('[data-slate-editor="true"]');if(e&&t)return t.style.minHeight="".concat(e.clientHeight,"px"),()=>{t.style.minHeight="auto"}}),[s,t]);var d=n.createElement(A,{isLast:r,leaf:t,parent:o,text:a});if(t[re]){var c={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:s}};d=n.createElement(n.Fragment,null,l(c),d)}return i({attributes:{"data-slate-leaf":!0},children:d,leaf:t,text:a})},ae=n.memo(ne,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&o.Text.equals(t.leaf,e.leaf)&&t.leaf[re]===e.leaf[re])),oe=e=>{var{attributes:t,children:r}=e;return n.createElement("span",Object.assign({},t),r)},le=["anchor","focus"],ie=["anchor","focus"],se=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((r=>t.hasOwnProperty(r)&&e[r]===t[r])),de=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r],l=x(n,le),i=x(a,ie);if(!o.Range.equals(n,a)||n[re]!==a[re]||!se(l,i))return!1}return!0};function ce(e){var t=(0,n.useRef)(0),r=(0,n.useRef)(null),[,a]=(0,n.useState)(0);return(0,n.useEffect)((()=>(te.set(e,(()=>{r.current||(r.current=requestAnimationFrame((()=>{a((e=>e+1)),r.current=null})),t.current++)})),()=>{te.delete(e)})),[e]),r.current&&(cancelAnimationFrame(r.current),r.current=null),t.current}var ue=e=>{for(var{decorations:t,isLast:r,parent:a,renderPlaceholder:l,renderLeaf:i,text:s}=e,d=ge(),c=(0,n.useRef)(null),u=o.Text.decorations(s,t),f=ot.findKey(d,s),h=[],m=0;m<u.length;m++){var p=u[m];h.push(n.createElement(ae,{isLast:r&&m===u.length-1,key:"".concat(f.id,"-").concat(m),renderPlaceholder:l,leaf:p,text:s,parent:a,renderLeaf:i}))}j((()=>{var e=K.get(d);c.current?(null==e||e.set(f,c.current),Z.set(s,c.current),U.set(c.current,s)):(null==e||e.delete(f),Z.delete(s))}));var v=N?ce(s):void 0;return n.createElement("span",{"data-slate-node":"text",ref:c,key:v},h)},fe=n.memo(ue,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text&&de(t.decorations,e.decorations))),he=e=>{var{decorations:t,element:r,renderElement:a=(e=>n.createElement(pe,Object.assign({},e))),renderPlaceholder:l,renderLeaf:s,selection:d}=e,c=(0,n.useRef)(null),u=ge(),f=Oe(),h=u.isInline(r),m=ot.findKey(u,r),p=ye({decorations:t,node:r,renderElement:a,renderPlaceholder:l,renderLeaf:s,selection:d}),v={"data-slate-node":"element",ref:c};if(h&&(v["data-slate-inline"]=!0),!h&&o.Editor.hasInlines(u,r)){var g=o.Node.string(r),E=i()(g);"rtl"===E&&(v.dir=E)}if(o.Editor.isVoid(u,r)){v["data-slate-void"]=!0,!f&&h&&(v.contentEditable=!1);var w=h?"span":"div",[[b]]=o.Node.texts(r);p=f?null:n.createElement(w,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},n.createElement(fe,{renderPlaceholder:l,decorations:[],isLast:!1,parent:r,text:b})),H.set(b,0),$.set(b,r)}j((()=>{var e=K.get(u);c.current?(null==e||e.set(m,c.current),Z.set(r,c.current),U.set(c.current,r)):(null==e||e.delete(m),Z.delete(r))}));var y=a({attributes:v,children:p,element:r});if(N){var x=ce(r);return n.createElement(n.Fragment,{key:x},y)}return y},me=n.memo(he,((e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&de(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&o.Range.equals(e.selection,t.selection)))),pe=e=>{var{attributes:t,children:r,element:a}=e,o=ge().isInline(a)?"span":"div";return n.createElement(o,Object.assign({},t,{style:{position:"relative"}}),r)},ve=(0,n.createContext)(null),ge=()=>{var e=(0,n.useContext)(ve);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},Ee=(0,n.createContext)((()=>[])),we=(0,n.createContext)(!1),be=()=>(0,n.useContext)(we),ye=e=>{for(var{decorations:t,node:r,renderElement:a,renderPlaceholder:l,renderLeaf:i,selection:s}=e,d=(0,n.useContext)(Ee),c=ge(),u=ot.findPath(c,r),f=[],h=o.Element.isElement(r)&&!c.isInline(r)&&o.Editor.hasInlines(c,r),m=0;m<r.children.length;m++){var p=u.concat(m),v=r.children[m],g=ot.findKey(c,v),E=o.Editor.range(c,p),w=s&&o.Range.intersection(E,s),b=d([v,p]);for(var y of t){var x=o.Range.intersection(y,E);x&&b.push(x)}o.Element.isElement(v)?f.push(n.createElement(we.Provider,{key:"provider-".concat(g.id),value:!!w},n.createElement(me,{decorations:b,element:v,key:g.id,renderElement:a,renderPlaceholder:l,renderLeaf:i,selection:w}))):f.push(n.createElement(fe,{decorations:b,key:g.id,isLast:h&&m===r.children.length-1,parent:r,renderPlaceholder:l,renderLeaf:i,text:v})),H.set(v,m),$.set(v,r)}return f},xe={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},ke={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Ce={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Ne=e=>{var t=xe[e],r=ke[e],n=Ce[e],a=t&&(0,w.TB)(t),o=r&&(0,w.TB)(r),l=n&&(0,w.TB)(n);return e=>!(!a||!a(e))||(!!(C&&o&&o(e))||!(C||!l||!l(e)))},Te={isBold:Ne("bold"),isCompose:Ne("compose"),isMoveBackward:Ne("moveBackward"),isMoveForward:Ne("moveForward"),isDeleteBackward:Ne("deleteBackward"),isDeleteForward:Ne("deleteForward"),isDeleteLineBackward:Ne("deleteLineBackward"),isDeleteLineForward:Ne("deleteLineForward"),isDeleteWordBackward:Ne("deleteWordBackward"),isDeleteWordForward:Ne("deleteWordForward"),isExtendBackward:Ne("extendBackward"),isExtendForward:Ne("extendForward"),isExtendLineBackward:Ne("extendLineBackward"),isExtendLineForward:Ne("extendLineForward"),isItalic:Ne("italic"),isMoveLineBackward:Ne("moveLineBackward"),isMoveLineForward:Ne("moveLineForward"),isMoveWordBackward:Ne("moveWordBackward"),isMoveWordForward:Ne("moveWordForward"),isRedo:Ne("redo"),isSplitBlock:Ne("splitBlock"),isTransposeCharacter:Ne("transposeCharacter"),isUndo:Ne("undo")},De=(0,n.createContext)(!1),Oe=()=>(0,n.useContext)(De),Se=(0,n.createContext)(null),Me=()=>{var e=(0,n.useContext)(Se);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var[t]=e;return t},Be=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,Re=e=>Pe(e)&&1===e.nodeType,Pe=e=>{var t=Be(e);return!!t&&e instanceof t.Node},Le=e=>{var t=e&&e.anchorNode&&Be(e.anchorNode);return!!t&&e instanceof t.Selection},Fe=e=>Pe(e)&&3===e.nodeType,_e=(e,t,r)=>{for(var n,{childNodes:a}=e,o=a[t],l=t,i=!1,s=!1;(Pe(n=o)&&8===n.nodeType||Re(o)&&0===o.childNodes.length||Re(o)&&"false"===o.getAttribute("contenteditable"))&&(!i||!s);)l>=a.length?(i=!0,l=t-1,r="backward"):l<0?(s=!0,l=t+1,r="forward"):(o=a[l],t=l,l+="forward"===r?1:-1);return[o,t]},je=(e,t,r)=>{var[n]=_e(e,t,r);return n},Ae=e=>{var t="";if(Fe(e)&&e.nodeValue)return e.nodeValue;if(Re(e)){for(var r of Array.from(e.childNodes))t+=Ae(r);var n=getComputedStyle(e).getPropertyValue("display");"block"!==n&&"list"!==n&&"BR"!==e.tagName||(t+="\n")}return t},We=/data-slate-fragment="(.+?)"/m,ze=e=>{var t=e.getData("text/html"),[,r]=t.match(We)||[];return r},He=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as"];function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ve=e=>n.createElement(n.Fragment,null,ye(e)),Ue=e=>{var{attributes:t,children:r}=e;return n.createElement("span",Object.assign({},t),r)},Ze=()=>[],qe=(e,t)=>{if(!e.selection||e.selection&&o.Range.isCollapsed(e.selection)){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),E(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},Ke=(e,t)=>Pe(t)&&ot.hasDOMNode(e,t),Je=(e,t)=>Pe(t)&&ot.hasDOMNode(e,t,{editable:!0}),Ye=(e,t)=>{if(J.get(e))return!1;var r=Ke(e,t)&&ot.toSlateNode(e,t);return o.Editor.isVoid(e,r)},Xe=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},Qe=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented};function Ge(e,t){if(e===t)return null;var r=function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return e.length!==t.length?r:null}(e,t);if(null===r)return null;var n=function(e,t,r){for(var n=e.length,a=t.length,o=Math.min(n,a,r),l=0;l<o;l++)if(e.charAt(n-l-1)!==t.charAt(a-l-1))return l;return e.length!==t.length?o:null}(e,t,Math.min(e.length-r,t.length-r));return null===n?null:{start:r,end:n}}function et(e,t){return e.slice(t.start,e.length-t.end)}function tt(e,t){var r=ot.toSlateNode(e,t);if(o.Text.isText(r)){var n=r.text,a=t.textContent;if(a.endsWith("\n")&&(a=a.slice(0,a.length-1)),a!==n){var l=function(e,t){if(void 0===e||void 0===t)return null;var r=Ge(e,t);if(null==r)return null;var n=et(t,r),a=et(e,r);return{start:r.start,end:e.length-r.end,insertText:n,removeText:a}}(n,a);if(null!==l)return{text:l,path:ot.findPath(e,r)}}}}function rt(e,t,r){var{path:n,text:a}=r,l={anchor:{path:n,offset:a.start},focus:{path:n,offset:a.end}};if(!t||!o.Range.isCollapsed(t))return l;var{insertText:i,removeText:s}=a;if((1===i.length||1===s.length)&&o.Path.equals(t.anchor.path,n)){var[d]=Array.from(o.Editor.nodes(e,{at:t,match:o.Text.isText}));if(d){var[c]=d,{anchor:u}=t,f=c.text[u.offset-1],h=c.text[u.offset];if(1===i.length&&i===h)return t;if(1===s.length&&s===f)return{anchor:{path:n,offset:u.offset-1},focus:{path:n,offset:u.offset}}}}return l}var nt=0;class at{constructor(){this.id="".concat(nt++)}}var ot={getWindow(e){var t=I.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},findKey(e,t){var r=q.get(t);return r||(r=new at,q.set(t,r)),r},findPath(e,t){for(var r=[],n=t;;){var a=$.get(n);if(null==a){if(o.Editor.isEditor(n))return r;break}var l=H.get(n);if(null==l)break;r.unshift(l),n=a}throw new Error("Unable to find the path for Slate node: ".concat(JSON.stringify(t)))},findDocumentOrShadowRoot(e){var t=ot.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},isFocused:e=>!!Y.get(e),isReadOnly:e=>!!J.get(e),blur(e){var t=ot.toDOMNode(e,e),r=ot.findDocumentOrShadowRoot(e);Y.set(e,!1),r.activeElement===t&&t.blur()},focus(e){var t=ot.toDOMNode(e,e),r=ot.findDocumentOrShadowRoot(e);Y.set(e,!0),r.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){ot.toDOMNode(e,e);var{selection:t}=e,r=ot.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&o.Transforms.deselect(e)},hasDOMNode(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:a=!1}=n,o=ot.toDOMNode(e,e);try{r=Re(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&!(r.closest("[data-slate-editor]")!==o||a&&!r.isContentEditable&&("boolean"!=typeof r.isContentEditable||r.closest('[contenteditable="false"]')!==o)&&!r.getAttribute("data-slate-zero-width"))},insertData(e,t){e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),setFragmentData(e,t,r){e.setFragmentData(t,r)},toDOMNode(e,t){var r=K.get(e),n=o.Editor.isEditor(t)?V.get(e):null==r?void 0:r.get(ot.findKey(e,t));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(JSON.stringify(t)));return n},toDOMPoint(e,t){var r,[n]=o.Editor.node(e,t.path),a=ot.toDOMNode(e,n);o.Editor.void(e,{at:t})&&(t={path:t.path,offset:0});var l=Array.from(a.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),i=0;for(var s of l){var d=s.childNodes[0];if(null!=d&&null!=d.textContent){var{length:c}=d.textContent,u=s.getAttribute("data-slate-length"),f=i+(null==u?c:parseInt(u,10));if(t.offset<=f){r=[d,Math.min(c,Math.max(0,t.offset-i))];break}i=f}}if(!r)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(JSON.stringify(t)));return r},toDOMRange(e,t){var{anchor:r,focus:n}=t,a=o.Range.isBackward(t),l=ot.toDOMPoint(e,r),i=o.Range.isCollapsed(t)?l:ot.toDOMPoint(e,n),s=ot.getWindow(e).document.createRange(),[d,c]=a?i:l,[u,f]=a?l:i,h=!!(Re(d)?d:d.parentElement).getAttribute("data-slate-zero-width"),m=!!(Re(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return s.setStart(d,h?1:c),s.setEnd(u,m?1:f),s},toSlateNode(e,t){var r=Re(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?U.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},findEventRange(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:r,clientY:n,target:a}=t;if(null==r||null==n)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var l,i=ot.toSlateNode(e,t.target),s=ot.findPath(e,i);if(o.Editor.isVoid(e,i)){var d=a.getBoundingClientRect(),c=e.isInline(i)?r-d.left<d.left+d.width-r:n-d.top<d.top+d.height-n,u=o.Editor.point(e,s,{edge:c?"start":"end"}),f=c?o.Editor.before(e,u):o.Editor.after(e,u);if(f)return o.Editor.range(e,f)}var{document:h}=ot.getWindow(e);if(h.caretRangeFromPoint)l=h.caretRangeFromPoint(r,n);else{var m=h.caretPositionFromPoint(r,n);m&&((l=h.createRange()).setStart(m.offsetNode,m.offset),l.setEnd(m.offsetNode,m.offset))}if(!l)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return ot.toSlateRange(e,l,{exactMatch:!1,suppressThrow:!1})},toSlatePoint(e,t,r){var{exactMatch:n,suppressThrow:a}=r,[o,l]=n?t:(e=>{var[t,r]=e;if(Re(t)&&t.childNodes.length){var n=r===t.childNodes.length,a=n?r-1:r;for([t,a]=_e(t,a,n?"backward":"forward"),n=a<r;Re(t)&&t.childNodes.length;){var o=n?t.childNodes.length-1:0;t=je(t,o,n?"backward":"forward")}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]})(t),i=o.parentNode,s=null,d=0;if(i){var c,u=i.closest('[data-slate-void="true"]'),f=i.closest("[data-slate-leaf]"),h=null;if(f){if(s=f.closest('[data-slate-node="text"]')){var m=ot.getWindow(e).document.createRange();m.setStart(s,0),m.setEnd(o,l);var p=m.cloneContents();[...Array.prototype.slice.call(p.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(p.querySelectorAll("[contenteditable=false]"))].forEach((e=>{e.parentNode.removeChild(e)})),d=p.textContent.length,h=s}}else u&&((f=u.querySelector("[data-slate-leaf]"))?(s=f.closest('[data-slate-node="text"]'),d=(h=f).textContent.length,h.querySelectorAll("[data-slate-zero-width]").forEach((e=>{d-=e.textContent.length}))):d=1);h&&d===h.textContent.length&&(i.hasAttribute("data-slate-zero-width")||T&&null!==(c=h.textContent)&&void 0!==c&&c.endsWith("\n\n"))&&d--}if(!s){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var v=ot.toSlateNode(e,s);return{path:ot.findPath(e,v),offset:d}},toSlateRange(e,t,r){var n,a,l,i,s,{exactMatch:d,suppressThrow:c}=r;if((Le(t)?t.anchorNode:t.startContainer)&&(Le(t)?(n=t.anchorNode,a=t.anchorOffset,l=t.focusNode,i=t.focusOffset,s=S&&window.document.activeElement&&window.document.activeElement.shadowRoot?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed):(n=t.startContainer,a=t.startOffset,l=t.endContainer,i=t.endOffset,s=t.collapsed)),null==n||null==l||null==a||null==i)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));var u=ot.toSlatePoint(e,[n,a],{exactMatch:d,suppressThrow:c});if(!u)return null;var f=s?u:ot.toSlatePoint(e,[l,i],{exactMatch:d,suppressThrow:c});if(!f)return null;var h={anchor:u,focus:f};return o.Range.isExpanded(h)&&o.Range.isForward(h)&&Re(l)&&o.Editor.void(e,{at:h.focus,mode:"highest"})&&(h=o.Editor.unhangRange(e,h,{voids:!0})),h},hasRange(e,t){var{anchor:r,focus:n}=t;return o.Editor.hasPath(e,r.path)&&o.Editor.hasPath(e,n.path)}};class lt{constructor(e,t){this.editor=e,this.restoreDOM=t,this.flush=e=>{try{this.reconcileMutations(e)}catch(e){console.error(e),this.restoreDOM()}},this.reconcileMutations=e=>{var t=function(e,t){var r=[],n=[],a=[],l=[];return t.forEach((t=>{switch(t.type){case"childList":t.addedNodes.length&&t.addedNodes.forEach((e=>{r.push(e)})),t.removedNodes.forEach((e=>{n.push(e)}));break;case"characterData":l.push(t);var{parentNode:i}=t.target;if(!i)return;var s=tt(e,i);if(!s)return;if(a.some((e=>{var{path:t}=e;return o.Path.equals(t,s.path)})))return;a.push(s)}})),{addedNodes:r,removedNodes:n,insertedText:a,characterDataMutations:l}}(this.editor,e),{insertedText:r,removedNodes:n}=t;if(((e,t)=>{var{selection:r}=e,{removedNodes:n}=t;return!!r&&o.Range.isExpanded(r)&&n.length>0})(this.editor,t)){var a=function(e){return e.reduce(((e,t)=>{var{text:r}=t;return"".concat(e).concat(r.insertText)}),"")}(r);this.replaceExpandedSelection(a)}else((e,t)=>{var{addedNodes:r}=t,{selection:n}=e,a=n?o.Node.parent(e,n.anchor.path):null,l=a?ot.toDOMNode(e,a):null;return!!l&&r.some((e=>e instanceof HTMLElement&&e.tagName===(null==l?void 0:l.tagName)))})(this.editor,t)?this.insertBreak():((e,t)=>{var{addedNodes:r,characterDataMutations:n,removedNodes:a}=t;return a.length>0&&0===r.length&&n.length>0})(this.editor,t)?this.removeLeafNodes(n):((e,t)=>{var{removedNodes:r}=t;return r.length>0})(this.editor,t)?this.deleteBackward():((e,t)=>{var{insertedText:r}=t;return r.length>0})(this.editor,t)&&this.insertText(r)},this.insertText=e=>{var{selection:t}=this.editor;if(X.get(this.editor)||Q.get(this.editor))return G.set(this.editor,e),void Q.set(this.editor,!1);e.forEach((e=>{var r=e.text.insertText,n=rt(this.editor,t,e);o.Transforms.setSelection(this.editor,n),o.Editor.insertText(this.editor,r)}))},this.insertBreak=()=>{var{selection:e}=this.editor;o.Editor.insertBreak(this.editor),this.restoreDOM(),e&&setTimeout((()=>{this.editor.selection&&o.Range.equals(e,this.editor.selection)&&o.Transforms.move(this.editor)}),100)},this.replaceExpandedSelection=e=>{o.Editor.deleteFragment(this.editor),e.length&&o.Editor.insertText(this.editor,e),this.restoreDOM()},this.deleteBackward=()=>{o.Editor.deleteBackward(this.editor),ot.focus(this.editor),this.restoreDOM()},this.removeLeafNodes=e=>{for(var t of e){var r=ot.toSlateNode(this.editor,t);if(r){var n=ot.findPath(this.editor,r);o.Transforms.delete(this.editor,{at:n}),this.restoreDOM()}}},this.editor=e,this.restoreDOM=t}}function it(e,t,r){var[a]=(0,n.useState)((()=>new MutationObserver(t)));j((()=>{a.disconnect()})),(0,n.useEffect)((()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(e.current,r),a.disconnect.bind(a)}))}var st={childList:!0,characterData:!0,subtree:!0};function dt(e){var t,r=Re(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r&&U.get(r);return n||(null!==(t=r)&&void 0!==t&&t.parentElement?dt(r.parentElement):null)}function ct(e,t){var r=ge(),a=(0,n.useRef)(new Set);it(e,(0,n.useCallback)((e=>{t.current&&e.forEach((e=>{var{target:t}=e,r=dt(t);if(r)return a.current.add(r)}))}),[]),st),a.current.clear();var l=(0,n.useCallback)((()=>{var e=Array.from(a.current.values()),t=e.filter((t=>!e.some((e=>o.Path.isParent(ot.findPath(r,e),ot.findPath(r,t))))));t.forEach((e=>{var t;null===(t=te.get(e))||void 0===t||t()})),a.current.clear()}),[]);return l}var ut={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};function ft(e){var t=ge(),{receivedUserInput:r,onUserInput:a}=function(){var e=ge(),t=(0,n.useRef)(!1),r=(0,n.useRef)(null),a=(0,n.useCallback)((()=>{if(!1===t.current){var n=ot.getWindow(e);t.current=!0,r.current&&n.cancelAnimationFrame(r.current),r.current=n.requestAnimationFrame((()=>{t.current=!1,r.current=null}))}}),[]);return(0,n.useEffect)((()=>{t.current&&(t.current=!1)})),{receivedUserInput:t,onUserInput:a}}(),o=ct(e,r),l=(0,n.useMemo)((()=>new lt(t,o)),[o,t]),i=(0,n.useRef)(null),s=(0,n.useRef)(!1);return it(e,(0,n.useCallback)((e=>{r.current&&(s.current=!0,l.flush(e),i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{s.current=!1,i.current=null}),250))}),[]),ut),{isReconciling:s,onUserInput:a}}var ht=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","style","as"];function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vt=(0,n.createContext)(!1),gt=()=>(0,n.useContext)(vt),Et=["editor","children","onChange","value"],wt=e=>{var{editor:t,children:r,onChange:a,value:l}=e,i=x(e,Et),s=(0,n.useRef)(!1),[d,c]=n.useState((()=>{if(!o.Node.isNodeList(l))throw new Error("[Slate] value is invalid! Expected a list of elements"+"but got: ".concat(JSON.stringify(l)));if(!o.Editor.isEditor(t))throw new Error("[Slate] editor is invalid! you passed:"+"".concat(JSON.stringify(t)));return t.children=l,Object.assign(t,i),[t]})),u=(0,n.useCallback)((()=>{a(t.children),c([t])}),[a]);ee.set(t,u),(0,n.useEffect)((()=>()=>{ee.set(t,(()=>{})),s.current=!0}),[]);var[f,h]=(0,n.useState)(ot.isFocused(t));return(0,n.useEffect)((()=>{h(ot.isFocused(t))})),j((()=>{var e=()=>{setTimeout((()=>{s.current||h(ot.isFocused(t))}),0)};return document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)}}),[]),n.createElement(Se.Provider,{value:d},n.createElement(ve.Provider,{value:t},n.createElement(vt.Provider,{value:f},r)))},bt=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},yt=(e,t,r)=>{var n=ot.toDOMRange(e,t).getBoundingClientRect(),a=ot.toDOMRange(e,r).getBoundingClientRect();return bt(n,a)&&bt(a,n)},xt=e=>{var t=e,{apply:r,onChange:n,deleteBackward:a}=t;return K.set(t,new WeakMap),t.deleteBackward=r=>{if("line"!==r)return a(r);if(e.selection&&o.Range.isCollapsed(e.selection)){var n=o.Editor.above(e,{match:t=>o.Editor.isBlock(e,t),at:e.selection});if(n){var[,l]=n,i=o.Editor.range(e,l,e.selection.anchor),s=((e,t)=>{var r=o.Editor.range(e,o.Range.end(t)),n=Array.from(o.Editor.positions(e,{at:t})),a=0,l=n.length,i=Math.floor(l/2);if(yt(e,o.Editor.range(e,n[a]),r))return o.Editor.range(e,n[a],r);if(n.length<2)return o.Editor.range(e,n[n.length-1],r);for(;i!==n.length&&i!==a;)yt(e,o.Editor.range(e,n[i]),r)?l=i:a=i,i=Math.floor((a+l)/2);return o.Editor.range(e,n[l],r)})(t,i);o.Range.isCollapsed(s)||o.Transforms.delete(e,{at:s})}}},t.apply=e=>{var n=[];switch(e.type){case"insert_text":case"remove_text":case"set_node":for(var[a,l]of o.Editor.levels(t,{at:e.path})){var i=ot.findKey(t,a);n.push([l,i])}break;case"insert_node":case"remove_node":case"merge_node":case"split_node":for(var[s,d]of o.Editor.levels(t,{at:o.Path.parent(e.path)})){var c=ot.findKey(t,s);n.push([d,c])}break;case"move_node":for(var[u,f]of o.Editor.levels(t,{at:o.Path.common(o.Path.parent(e.path),o.Path.parent(e.newPath))})){var h=ot.findKey(t,u);n.push([f,h])}}for(var[m,p]of(r(e),n)){var[v]=o.Editor.node(t,m);q.set(v,p)}},t.setFragmentData=e=>{var{selection:r}=t;if(r){var[n,a]=o.Range.edges(r),l=o.Editor.void(t,{at:n.path}),i=o.Editor.void(t,{at:a.path});if(!o.Range.isCollapsed(r)||l){var s=ot.toDOMRange(t,r),d=s.cloneContents(),c=d.childNodes[0];if(d.childNodes.forEach((e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)})),i){var[u]=i,f=s.cloneRange(),h=ot.toDOMNode(t,u);f.setEndAfter(h),d=f.cloneContents()}if(l&&(c=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach((e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),Fe(c)){var m=c.ownerDocument.createElement("span");m.style.whiteSpace="pre",m.appendChild(c),d.appendChild(m),c=m}var p=t.getFragment(),v=JSON.stringify(p),g=window.btoa(encodeURIComponent(v));c.setAttribute("data-slate-fragment",g),e.setData("application/x-slate-fragment",g);var E=d.ownerDocument.createElement("div");return E.appendChild(d),E.setAttribute("hidden","true"),d.ownerDocument.body.appendChild(E),e.setData("text/html",E.innerHTML),e.setData("text/plain",Ae(E)),d.ownerDocument.body.removeChild(E),e}}},t.insertData=e=>{t.insertFragmentData(e)||t.insertTextData(e)},t.insertFragmentData=e=>{var r=e.getData("application/x-slate-fragment")||ze(e);if(r){var n=decodeURIComponent(window.atob(r)),a=JSON.parse(n);return t.insertFragment(a),!0}return!1},t.insertTextData=e=>{var r=e.getData("text/plain");if(r){var n=r.split(/\r\n|\r|\n/),a=!1;for(var l of n)a&&o.Transforms.splitNodes(t,{always:!0}),t.insertText(l),a=!0;return!0}return!1},t.onChange=()=>{b.unstable_batchedUpdates((()=>{var e=ee.get(t);e&&e(),n()}))},t},kt=N?e=>{var{autoFocus:t,decorate:r=Ze,onDOMBeforeInput:a,placeholder:l,readOnly:i=!1,renderElement:s,renderLeaf:c,renderPlaceholder:f=(e=>n.createElement(Ue,Object.assign({},e))),style:h={},as:m="div"}=e,p=x(e,ht),v=Me(),[g,w]=(0,n.useState)(!1),b=(0,n.useRef)(null),y=ft(b);J.set(v,i);var k=(0,n.useMemo)((()=>({isComposing:!1,isUpdatingSelection:!1,latestElement:null})),[]),C=ce(v);j((()=>{var e;b.current&&(e=Be(b.current))?(I.set(v,e),V.set(v,b.current),Z.set(v,b.current),U.set(b.current,v)):Z.delete(v);try{var{selection:t}=v,r=ot.findDocumentOrShadowRoot(v).getSelection();if(k.isComposing||!r||!ot.isFocused(v))return;var n="None"!==r.type;if(!t&&!n)return;var a=V.get(v),l=!1;if(a.contains(r.anchorNode)&&a.contains(r.focusNode)&&(l=!0),n&&l&&t){var i=ot.toSlateRange(v,r,{exactMatch:!0,suppressThrow:!0});if(i&&o.Range.equals(i,t))return}if(t&&!ot.hasRange(v,t))return void(v.selection=ot.toSlateRange(v,r,{exactMatch:!1,suppressThrow:!1}));var s=ot.toDOMNode(v,v);k.isUpdatingSelection=!0;var d=t&&ot.toDOMRange(v,t);if(d){o.Range.isBackward(t)?r.setBaseAndExtent(d.endContainer,d.endOffset,d.startContainer,d.startOffset):r.setBaseAndExtent(d.startContainer,d.startOffset,d.endContainer,d.endOffset);var c=d.startContainer.parentElement;c.getBoundingClientRect=d.getBoundingClientRect.bind(d),E(c,{scrollMode:"if-needed",boundary:s}),delete c.getBoundingClientRect}else r.removeAllRanges();setTimeout((()=>{k.isUpdatingSelection=!1}))}catch(e){k.isUpdatingSelection=!1}})),(0,n.useEffect)((()=>{b.current&&t&&b.current.focus()}),[t]);var N=(0,n.useCallback)(u()((()=>{try{if(!k.isComposing&&!k.isUpdatingSelection&&!y.isReconciling.current){var e=ot.findDocumentOrShadowRoot(v),{activeElement:t}=e,r=ot.toDOMNode(v,v),n=e.getSelection();if(t===r?(k.latestElement=t,Y.set(v,!0)):Y.delete(v),!n)return o.Transforms.deselect(v);var{anchorNode:a,focusNode:l}=n,i=Je(v,a)||Ye(v,a),s=Je(v,l)||Ye(v,l);if(i&&s){var d=ot.toSlateRange(v,n,{exactMatch:!1,suppressThrow:!1});o.Transforms.select(v,d)}else o.Transforms.deselect(v)}}catch(e){}}),100),[i]),T=(0,n.useMemo)((()=>d()(N,0)),[N]),D=(0,n.useCallback)((e=>{i||!Je(v,e.target)||Qe(e,a)||(T.flush(),y.onUserInput())}),[i,a]);j((()=>{var e=b.current;return null==e||e.addEventListener("beforeinput",D),()=>null==e?void 0:e.removeEventListener("beforeinput",D)}),[C,a]),j((()=>{var e=ot.getWindow(v);return e.document.addEventListener("selectionchange",T),()=>{e.document.removeEventListener("selectionchange",T)}}),[T]);var O=r([v,[]]);if(l&&1===v.children.length&&1===Array.from(o.Node.texts(v)).length&&""===o.Node.string(v)&&!g){var S=o.Editor.start(v,[]);O.push({[re]:!0,placeholder:l,anchor:S,focus:S})}return n.createElement(De.Provider,{value:i},n.createElement(Ee.Provider,{value:r},n.createElement(m,Object.assign({key:C,role:i?void 0:"textbox"},p,{spellCheck:p.spellCheck,autoCorrect:p.autoCorrect,autoCapitalize:p.autoCapitalize,"data-slate-editor":!0,"data-slate-node":"value",contentEditable:!i||void 0,suppressContentEditableWarning:!0,ref:b,style:pt({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},h),onCopy:(0,n.useCallback)((e=>{Je(v,e.target)&&!Xe(e,p.onCopy)&&(e.preventDefault(),ot.setFragmentData(v,e.clipboardData,"copy"))}),[p.onCopy]),onCut:(0,n.useCallback)((e=>{if(!i&&Je(v,e.target)&&!Xe(e,p.onCut)){e.preventDefault(),ot.setFragmentData(v,e.clipboardData,"cut");var{selection:t}=v;if(t)if(o.Range.isExpanded(t))o.Editor.deleteFragment(v);else{var r=o.Node.parent(v,t.anchor.path);o.Editor.isVoid(v,r)&&o.Transforms.delete(v)}}}),[i,p.onCut]),onFocus:(0,n.useCallback)((e=>{if(!i&&!k.isUpdatingSelection&&Je(v,e.target)&&!Xe(e,p.onFocus)){var t=ot.findDocumentOrShadowRoot(v);k.latestElement=t.activeElement,Y.set(v,!0)}}),[i,p.onFocus]),onBlur:(0,n.useCallback)((e=>{if(!i&&!k.isUpdatingSelection&&Je(v,e.target)&&!Xe(e,p.onBlur)){var t=ot.findDocumentOrShadowRoot(v);if(k.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===ot.toDOMNode(v,v)||Re(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&Pe(r)&&ot.hasDOMNode(v,r)){var n=ot.toSlateNode(v,r);if(o.Element.isElement(n)&&!v.isVoid(n))return}Y.delete(v)}}}}),[i,p.onBlur]),onClick:(0,n.useCallback)((e=>{if(!i&&Ke(v,e.target)&&!Xe(e,p.onClick)&&Pe(e.target)){var t=ot.toSlateNode(v,e.target),r=ot.findPath(v,t);if(o.Editor.hasPath(v,r))if(o.Node.get(v,r)===t){var n=o.Editor.start(v,r),a=o.Editor.end(v,r),l=o.Editor.void(v,{at:n}),s=o.Editor.void(v,{at:a});if(l&&s&&o.Path.equals(l[1],s[1])){var d=o.Editor.range(v,n);o.Transforms.select(v,d)}}}}),[i,p.onClick]),onCompositionEnd:(0,n.useCallback)((e=>{Je(v,e.target)&&!Xe(e,p.onCompositionEnd)&&(T.flush(),setTimeout((()=>{k.isComposing&&w(!1),k.isComposing=!1,X.set(v,!1),Q.set(v,!0);var e=G.get(v)||[];if(e.length){G.set(v,[]);var{selection:t}=v;e.forEach((e=>{var r=e.text.insertText,n=rt(v,t,e);o.Transforms.setSelection(v,n),o.Editor.insertText(v,r)}))}}),20))}),[p.onCompositionEnd]),onCompositionUpdate:(0,n.useCallback)((e=>{Je(v,e.target)&&!Xe(e,p.onCompositionUpdate)&&(!k.isComposing&&w(!0),k.isComposing=!0,X.set(v,!0))}),[p.onCompositionUpdate]),onCompositionStart:(0,n.useCallback)((e=>{Je(v,e.target)&&!Xe(e,p.onCompositionStart)&&(!k.isComposing&&w(!0),k.isComposing=!0,X.set(v,!0))}),[p.onCompositionStart]),onPaste:(0,n.useCallback)((e=>{e.clipboardData=(e=>{if(!e.getData("application/x-slate-fragment")){var t=ze(e);if(t){var r=new DataTransfer;return e.types.forEach((t=>{r.setData(t,e.getData(t))})),r.setData("application/x-slate-fragment",t),r}}return e})(e.clipboardData),!Je(v,e.target)||Xe(e,p.onPaste)||i||(e.preventDefault(),ot.insertData(v,e.clipboardData))}),[i,p.onPaste])}),ye({decorations:O,node:v,renderElement:s,renderPlaceholder:f,renderLeaf:c,selection:v.selection}))))}:e=>{var{autoFocus:t,decorate:r=Ze,onDOMBeforeInput:a,placeholder:l,readOnly:s=!1,renderElement:c,renderLeaf:f,renderPlaceholder:h=(e=>n.createElement(Ue,Object.assign({},e))),scrollSelectionIntoView:m=qe,style:p={},as:v="div"}=e,g=x(e,He),E=Me(),[w,b]=(0,n.useState)(!1),y=(0,n.useRef)(null),C=(0,n.useRef)([]);J.set(E,s);var N=(0,n.useMemo)((()=>({isComposing:!1,hasInsertPrefixInCompositon:!1,isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null})),[]);j((()=>{var e;y.current&&(e=Be(y.current))?(I.set(E,e),V.set(E,y.current),Z.set(E,y.current),U.set(y.current,E)):Z.delete(E);var{selection:t}=E,r=ot.findDocumentOrShadowRoot(E).getSelection();if(!N.isComposing&&r&&ot.isFocused(E)){var n="None"!==r.type;if(t||n){var a=V.get(E),l=!1;if(a.contains(r.anchorNode)&&a.contains(r.focusNode)&&(l=!0),n&&l&&t){var i=ot.toSlateRange(E,r,{exactMatch:!0,suppressThrow:!0});if(i&&o.Range.equals(i,t))return}if(!t||ot.hasRange(E,t)){N.isUpdatingSelection=!0;var s=t&&ot.toDOMRange(E,t);s?(o.Range.isBackward(t)?r.setBaseAndExtent(s.endContainer,s.endOffset,s.startContainer,s.startOffset):r.setBaseAndExtent(s.startContainer,s.startOffset,s.endContainer,s.endOffset),m(E,s)):r.removeAllRanges(),setTimeout((()=>{s&&T&&ot.toDOMNode(E,E).focus();N.isUpdatingSelection=!1}))}else E.selection=ot.toSlateRange(E,r,{exactMatch:!1,suppressThrow:!1})}}})),(0,n.useEffect)((()=>{y.current&&t&&y.current.focus()}),[t]);var O=(0,n.useCallback)(u()((()=>{if(!N.isComposing&&!N.isUpdatingSelection&&!N.isDraggingInternally){var e=ot.findDocumentOrShadowRoot(E),{activeElement:t}=e,r=ot.toDOMNode(E,E),n=e.getSelection();if(t===r?(N.latestElement=t,Y.set(E,!0)):Y.delete(E),!n)return o.Transforms.deselect(E);var{anchorNode:a,focusNode:l}=n,i=Je(E,a)||Ye(E,a),s=Je(E,l)||Ye(E,l);if(i&&s){var d=ot.toSlateRange(E,n,{exactMatch:!1,suppressThrow:!1});o.Transforms.select(E,d)}}}),100),[s]),M=(0,n.useMemo)((()=>d()(O,0)),[O]),A=(0,n.useCallback)((e=>{if(!s&&Je(E,e.target)&&!Qe(e,a)){M.flush(),O.flush();var{selection:t}=E,{inputType:r}=e,n=e.dataTransfer||e.data||void 0;if("insertCompositionText"===r||"deleteCompositionText"===r)return;var l=!1;if("insertText"===r&&t&&o.Range.isCollapsed(t)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==t.anchor.offset){l=!0,E.marks&&(l=!1);var{anchor:i}=t,d=o.Editor.above(E,{at:i,match:e=>o.Editor.isInline(E,e),mode:"highest"});if(d){var[,c]=d;o.Editor.isEnd(E,t.anchor,c)&&(l=!1)}}if(l||e.preventDefault(),!r.startsWith("delete")||r.startsWith("deleteBy")){var[u]=e.getTargetRanges();if(u){var f=ot.toSlateRange(E,u,{exactMatch:!1,suppressThrow:!1});t&&o.Range.equals(t,f)||o.Transforms.select(E,f)}}if(t&&o.Range.isExpanded(t)&&r.startsWith("delete")){var h=r.endsWith("Backward")?"backward":"forward";return void o.Editor.deleteFragment(E,{direction:h})}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":o.Editor.deleteFragment(E);break;case"deleteContent":case"deleteContentForward":o.Editor.deleteForward(E);break;case"deleteContentBackward":o.Editor.deleteBackward(E);break;case"deleteEntireSoftLine":o.Editor.deleteBackward(E,{unit:"line"}),o.Editor.deleteForward(E,{unit:"line"});break;case"deleteHardLineBackward":o.Editor.deleteBackward(E,{unit:"block"});break;case"deleteSoftLineBackward":o.Editor.deleteBackward(E,{unit:"line"});break;case"deleteHardLineForward":o.Editor.deleteForward(E,{unit:"block"});break;case"deleteSoftLineForward":o.Editor.deleteForward(E,{unit:"line"});break;case"deleteWordBackward":o.Editor.deleteBackward(E,{unit:"word"});break;case"deleteWordForward":o.Editor.deleteForward(E,{unit:"word"});break;case"insertLineBreak":case"insertParagraph":o.Editor.insertBreak(E);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&(N.isComposing&&b(!1),N.isComposing=!1),"DataTransfer"===(null==n?void 0:n.constructor.name)?ot.insertData(E,n):"string"==typeof n&&(l?C.current.push((()=>o.Editor.insertText(E,n))):o.Editor.insertText(E,n))}}}),[s,a]);j((()=>(y.current&&_&&y.current.addEventListener("beforeinput",A),()=>{y.current&&_&&y.current.removeEventListener("beforeinput",A)})),[A]),j((()=>{var e=ot.getWindow(E);return e.document.addEventListener("selectionchange",M),()=>{e.document.removeEventListener("selectionchange",M)}}),[M]);var W=r([E,[]]);if(l&&1===E.children.length&&1===Array.from(o.Node.texts(E)).length&&""===o.Node.string(E)&&!w){var z=o.Editor.start(E,[]);W.push({[re]:!0,placeholder:l,anchor:z,focus:z})}return n.createElement(De.Provider,{value:s},n.createElement(Ee.Provider,{value:r},n.createElement(v,Object.assign({role:s?void 0:"textbox"},g,{spellCheck:!(!_&&F)&&g.spellCheck,autoCorrect:_||!F?g.autoCorrect:"false",autoCapitalize:_||!F?g.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:y,style:Ie({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},p),onBeforeInput:(0,n.useCallback)((e=>{if(!_&&!s&&!Xe(e,g.onBeforeInput)&&Je(E,e.target)&&(e.preventDefault(),!N.isComposing)){var t=e.data;o.Editor.insertText(E,t)}}),[s]),onInput:(0,n.useCallback)((e=>{for(var t of C.current)t();C.current=[]}),[]),onBlur:(0,n.useCallback)((e=>{if(!s&&!N.isUpdatingSelection&&Je(E,e.target)&&!Xe(e,g.onBlur)){var t=ot.findDocumentOrShadowRoot(E);if(N.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===ot.toDOMNode(E,E)||Re(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&Pe(r)&&ot.hasDOMNode(E,r)){var n=ot.toSlateNode(E,r);if(o.Element.isElement(n)&&!E.isVoid(n))return}if(D){var a=t.getSelection();null==a||a.removeAllRanges()}Y.delete(E)}}}}),[s,g.onBlur]),onClick:(0,n.useCallback)((e=>{if(!s&&Ke(E,e.target)&&!Xe(e,g.onClick)&&Pe(e.target)){var t=ot.toSlateNode(E,e.target),r=ot.findPath(E,t);if(o.Editor.hasPath(E,r))if(o.Node.get(E,r)===t){var n=o.Editor.start(E,r),a=o.Editor.end(E,r),l=o.Editor.void(E,{at:n}),i=o.Editor.void(E,{at:a});if(l&&i&&o.Path.equals(l[1],i[1])){var d=o.Editor.range(E,n);o.Transforms.select(E,d)}}}}),[s,g.onClick]),onCompositionEnd:(0,n.useCallback)((e=>{if(Je(E,e.target)&&!Xe(e,g.onCompositionEnd)&&(N.isComposing&&b(!1),N.isComposing=!1,D||B||k||R||L||P||!e.data||o.Editor.insertText(E,e.data),E.selection&&o.Range.isCollapsed(E.selection))){var t=E.selection.anchor.path,r=o.Node.leaf(E,t);N.hasInsertPrefixInCompositon&&(N.hasInsertPrefixInCompositon=!1,o.Editor.withoutNormalizing(E,(()=>{var e=r.text.replace(/^\uFEFF/,"");o.Transforms.delete(E,{distance:r.text.length,reverse:!0}),o.Editor.insertText(E,e)})))}}),[g.onCompositionEnd]),onCompositionUpdate:(0,n.useCallback)((e=>{Je(E,e.target)&&!Xe(e,g.onCompositionUpdate)&&(!N.isComposing&&b(!0),N.isComposing=!0)}),[g.onCompositionUpdate]),onCompositionStart:(0,n.useCallback)((e=>{if(Je(E,e.target)&&!Xe(e,g.onCompositionStart)){var{selection:t,marks:r}=E;if(t){if(o.Range.isExpanded(t))return void o.Editor.deleteFragment(E);var n=o.Editor.above(E,{match:e=>o.Editor.isInline(E,e),mode:"highest"});if(n){var[,a]=n;if(o.Editor.isEnd(E,t.anchor,a)){var l=o.Editor.after(E,a);o.Transforms.setSelection(E,{anchor:l,focus:l})}}r&&(N.hasInsertPrefixInCompositon=!0,o.Transforms.insertNodes(E,Ie({text:"\ufeff"},r),{select:!0}))}}}),[g.onCompositionStart]),onCopy:(0,n.useCallback)((e=>{Je(E,e.target)&&!Xe(e,g.onCopy)&&(e.preventDefault(),ot.setFragmentData(E,e.clipboardData,"copy"))}),[g.onCopy]),onCut:(0,n.useCallback)((e=>{if(!s&&Je(E,e.target)&&!Xe(e,g.onCut)){e.preventDefault(),ot.setFragmentData(E,e.clipboardData,"cut");var{selection:t}=E;if(t)if(o.Range.isExpanded(t))o.Editor.deleteFragment(E);else{var r=o.Node.parent(E,t.anchor.path);o.Editor.isVoid(E,r)&&o.Transforms.delete(E)}}}),[s,g.onCut]),onDragOver:(0,n.useCallback)((e=>{if(Ke(E,e.target)&&!Xe(e,g.onDragOver)){var t=ot.toSlateNode(E,e.target);o.Editor.isVoid(E,t)&&e.preventDefault()}}),[g.onDragOver]),onDragStart:(0,n.useCallback)((e=>{if(!s&&Ke(E,e.target)&&!Xe(e,g.onDragStart)){var t=ot.toSlateNode(E,e.target),r=ot.findPath(E,t);if(o.Editor.isVoid(E,t)||o.Editor.void(E,{at:r,voids:!0})){var n=o.Editor.range(E,r);o.Transforms.select(E,n)}N.isDraggingInternally=!0,ot.setFragmentData(E,e.dataTransfer,"drag")}}),[s,g.onDragStart]),onDrop:(0,n.useCallback)((e=>{if(!s&&Ke(E,e.target)&&!Xe(e,g.onDrop)){e.preventDefault();var t=E.selection,r=ot.findEventRange(E,e),n=e.dataTransfer;o.Transforms.select(E,r),N.isDraggingInternally&&(!t||o.Range.equals(t,r)||o.Editor.void(E,{at:r,voids:!0})||o.Transforms.delete(E,{at:t})),ot.insertData(E,n),ot.isFocused(E)||ot.focus(E)}N.isDraggingInternally=!1}),[s,g.onDrop]),onDragEnd:(0,n.useCallback)((e=>{!s&&N.isDraggingInternally&&g.onDragEnd&&Ke(E,e.target)&&g.onDragEnd(e),N.isDraggingInternally=!1}),[s,g.onDragEnd]),onFocus:(0,n.useCallback)((e=>{if(!s&&!N.isUpdatingSelection&&Je(E,e.target)&&!Xe(e,g.onFocus)){var t=ot.toDOMNode(E,E),r=ot.findDocumentOrShadowRoot(E);if(N.latestElement=r.activeElement,T&&e.target!==t)return void t.focus();Y.set(E,!0)}}),[s,g.onFocus]),onKeyDown:(0,n.useCallback)((e=>{if(!s&&!N.isComposing&&Je(E,e.target)&&!Xe(e,g.onKeyDown)){var{nativeEvent:t}=e,{selection:r}=E,n=E.children[null!==r?r.focus.path[0]:0],a="rtl"===i()(o.Node.string(n));if(Te.isRedo(t)){e.preventDefault();var l=E;return void("function"==typeof l.redo&&l.redo())}if(Te.isUndo(t)){e.preventDefault();var d=E;return void("function"==typeof d.undo&&d.undo())}if(Te.isMoveLineBackward(t))return e.preventDefault(),void o.Transforms.move(E,{unit:"line",reverse:!0});if(Te.isMoveLineForward(t))return e.preventDefault(),void o.Transforms.move(E,{unit:"line"});if(Te.isExtendLineBackward(t))return e.preventDefault(),void o.Transforms.move(E,{unit:"line",edge:"focus",reverse:!0});if(Te.isExtendLineForward(t))return e.preventDefault(),void o.Transforms.move(E,{unit:"line",edge:"focus"});if(Te.isMoveBackward(t))return e.preventDefault(),void(r&&o.Range.isCollapsed(r)?o.Transforms.move(E,{reverse:!a}):o.Transforms.collapse(E,{edge:"start"}));if(Te.isMoveForward(t))return e.preventDefault(),void(r&&o.Range.isCollapsed(r)?o.Transforms.move(E,{reverse:a}):o.Transforms.collapse(E,{edge:"end"}));if(Te.isMoveWordBackward(t))return e.preventDefault(),r&&o.Range.isExpanded(r)&&o.Transforms.collapse(E,{edge:"focus"}),void o.Transforms.move(E,{unit:"word",reverse:!a});if(Te.isMoveWordForward(t))return e.preventDefault(),r&&o.Range.isExpanded(r)&&o.Transforms.collapse(E,{edge:"focus"}),void o.Transforms.move(E,{unit:"word",reverse:a});if(_){if((S||D)&&r&&(Te.isDeleteBackward(t)||Te.isDeleteForward(t))&&o.Range.isCollapsed(r)){var c=o.Node.parent(E,r.anchor.path);if(o.Element.isElement(c)&&o.Editor.isVoid(E,c)&&o.Editor.isInline(E,c))return e.preventDefault(),void o.Editor.deleteBackward(E,{unit:"block"})}}else{if(Te.isBold(t)||Te.isItalic(t)||Te.isTransposeCharacter(t))return void e.preventDefault();if(Te.isSplitBlock(t))return e.preventDefault(),void o.Editor.insertBreak(E);if(Te.isDeleteBackward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(E,{direction:"backward"}):o.Editor.deleteBackward(E));if(Te.isDeleteForward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(E,{direction:"forward"}):o.Editor.deleteForward(E));if(Te.isDeleteLineBackward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(E,{direction:"backward"}):o.Editor.deleteBackward(E,{unit:"line"}));if(Te.isDeleteLineForward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(E,{direction:"forward"}):o.Editor.deleteForward(E,{unit:"line"}));if(Te.isDeleteWordBackward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(E,{direction:"backward"}):o.Editor.deleteBackward(E,{unit:"word"}));if(Te.isDeleteWordForward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(E,{direction:"forward"}):o.Editor.deleteForward(E,{unit:"word"}))}}}),[s,g.onKeyDown]),onPaste:(0,n.useCallback)((e=>{s||!Je(E,e.target)||Xe(e,g.onPaste)||_&&!(e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length)(e.nativeEvent)||(e.preventDefault(),ot.insertData(E,e.clipboardData))}),[s,g.onPaste])}),n.createElement(Ve,{decorations:W,node:E,renderElement:c,renderPlaceholder:h,renderLeaf:f,selection:E.selection}))))},Ct=r(90111),Nt={isHistory:e=>(0,Ct.P)(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||o.Operation.isOperationList(e.redos[0]))&&(0===e.undos.length||o.Operation.isOperationList(e.undos[0]))},Tt=(new WeakMap,new WeakMap),Dt=new WeakMap,Ot={isHistoryEditor:e=>Nt.isHistory(e.history)&&o.Editor.isEditor(e),isMerging:e=>Dt.get(e),isSaving:e=>Tt.get(e),redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var r=Ot.isMerging(e);Dt.set(e,!1),t(),Dt.set(e,r)},withoutSaving(e,t){var r=Ot.isSaving(e);Tt.set(e,!1),t(),Tt.set(e,r)}},St=(e,t)=>"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!o.Path.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!o.Path.equals(e.path,t.path))),Mt=(e,t)=>"set_selection"!==e.type||null!=e.properties&&null!=e.newProperties,Bt=(e,t)=>!(!t||"set_selection"!==e.type||"set_selection"!==t.type),Rt=e=>"set_selection"!==e.type,Pt=r(26793),Lt=r(35193),Ft=r(48170),_t=r(90546),jt=r.n(_t),At=r(953),Wt=r(90666);const zt=(e,t)=>{const r=o.Editor.marks(e);return!!r&&!0===r[t]},Ht=(e,t)=>{zt(e,t)?o.Editor.removeMark(e,t):o.Editor.addMark(e,t,!0)};r(43318);const $t="rich-text__button",It=({format:e,children:t})=>{const r=Me();return n.createElement("button",{type:"button",className:[$t,zt(r,e)&&`${$t}__button--active`].filter(Boolean).join(" "),onMouseDown:t=>{t.preventDefault(),Ht(r,e)}},t)},Vt=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic bold-icon"},n.createElement("path",{className:"fill",d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}),n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),Ut=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic inline-code-icon"},n.createElement("path",{className:"fill",d:"M7.375 16.781l1.25-1.562L4.601 12l4.024-3.219-1.25-1.562-5 4a1 1 0 000 1.562l5 4zm9.25-9.562l-1.25 1.562L19.399 12l-4.024 3.219 1.25 1.562 5-4a1 1 0 000-1.562l-5-4zM14.976 3.216l-4 18-1.953-.434 4-18z"})),Zt=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic italic-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"})),qt=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic strikethrough-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"})),Kt=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic underline-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"})),Jt={bold:{Button:()=>n.createElement(It,{format:"bold"},n.createElement(Vt,null)),Leaf:({attributes:e,children:t})=>n.createElement("strong",{...e},t)},code:{Button:()=>n.createElement(It,{format:"code"},n.createElement(Ut,null)),Leaf:({attributes:e,children:t})=>n.createElement("code",{...e},t)},italic:{Button:()=>n.createElement(It,{format:"italic"},n.createElement(Zt,null)),Leaf:({attributes:e,children:t})=>n.createElement("em",{...e},t)},strikethrough:{Button:()=>n.createElement(It,{format:"strikethrough"},n.createElement(qt,null)),Leaf:({attributes:e,children:t})=>n.createElement("del",{...e},t)},underline:{Button:()=>n.createElement(It,{format:"underline"},n.createElement(Kt,null)),Leaf:({attributes:e,children:t})=>n.createElement("u",{...e},t)}},Yt=(e,t)=>{if(!e.selection)return!1;const[r]=Array.from(o.Editor.nodes(e,{at:o.Editor.unhangRange(e,e.selection),match:e=>!o.Editor.isEditor(e)&&o.Element.isElement(e)&&e.type===t}));return!!r},Xt=(e,t)=>{const r=Yt(e,t);let n=t;const a=(e=>{var t;let r;try{r=o.Editor.parent(e,e.selection)}catch(e){}return!(!o.Element.isElement(null==r?void 0:r[0])||"li"!==(null===(t=null==r?void 0:r[0])||void 0===t?void 0:t.type))})(e);if(r&&(n=void 0),!r&&a){const t={type:"li",children:[]};o.Transforms.wrapNodes(e,t,{at:o.Editor.unhangRange(e,e.selection)})}o.Transforms.setNodes(e,{type:n},{at:o.Editor.unhangRange(e,e.selection)}),ot.focus(e)};var Qt=r(70579);const Gt="rich-text__button",er=e=>{const{format:t,children:r,onClick:a,className:o,tooltip:l,el:i="button"}=e,s=Me(),[d,c]=(0,n.useState)(!1),u=(0,n.useCallback)((e=>{e.preventDefault(),c(!1),Xt(s,t)}),[s,t]),f=i;return n.createElement(f,{..."button"===i&&{type:"button"},className:[Gt,o,Yt(s,t)&&`${Gt}__button--active`].filter(Boolean).join(" "),onClick:a||u,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},l&&n.createElement(Qt.Z,{show:d},l),r)},tr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h1-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14h-2V9h-2V7h4v10z"})),rr={Button:()=>n.createElement(er,{format:"h1"},n.createElement(tr,null)),Element:({attributes:e,children:t})=>n.createElement("h1",{...e},t)},nr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h2-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 8a2 2 0 01-2 2h-2v2h4v2H9v-4a2 2 0 012-2h2V9H9V7h4a2 2 0 012 2v2z"})),ar={Button:()=>n.createElement(er,{format:"h2"},n.createElement(nr,null)),Element:({attributes:e,children:t})=>n.createElement("h2",{...e},t)},or=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h3-icon"},n.createElement("path",{fill:"none",d:"M.01 0h24v24h-24z"}),n.createElement("path",{className:"fill",d:"M19.01 3h-14c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 7.5c0 .83-.67 1.5-1.5 1.5.83 0 1.5.67 1.5 1.5V15a2 2 0 01-2 2h-4v-2h4v-2h-2v-2h2V9h-4V7h4a2 2 0 012 2v1.5z"})),lr={Button:()=>n.createElement(er,{format:"h3"},n.createElement(or,null)),Element:({attributes:e,children:t})=>n.createElement("h3",{...e},t)},ir=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h4-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 14h-2v-4H9V7h2v4h2V7h2v10z"})),sr={Button:()=>n.createElement(er,{format:"h4"},n.createElement(ir,null)),Element:({attributes:e,children:t})=>n.createElement("h4",{...e},t)},dr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h5-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2a2 2 0 012 2v2a2 2 0 01-2 2H9v-2h4v-2H9V7h6v2z"})),cr={Button:()=>n.createElement(er,{format:"h5"},n.createElement(dr,null)),Element:({attributes:e,children:t})=>n.createElement("h5",{...e},t)},ur=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h6-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M11 15h2v-2h-2v2zm8-12H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V9a2 2 0 012-2h4v2z"})),fr={Button:()=>n.createElement(er,{format:"h6"},n.createElement(ur,null)),Element:({attributes:e,children:t})=>n.createElement("h6",{...e},t)},hr=e=>{o.Transforms.unwrapNodes(e,{match:e=>o.Element.isElement(e)&&"link"===e.type})};var mr=r(71851);const pr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic link"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}));var vr=r(56490),gr=r(9980),Er=r(30894),wr=r(84041);const br=(0,r(78498).extractTranslations)(["fields:textToDisplay","fields:linkType","fields:chooseBetweenCustomTextOrDocument","fields:customURL","fields:internalLink","fields:enterURL","fields:chooseDocumentToLink","fields:openInNewTab"]),yr=e=>[{name:"text",label:br["fields:textToDisplay"],type:"text",required:!0},{name:"linkType",label:br["fields:linkType"],type:"radio",required:!0,admin:{description:br["fields:chooseBetweenCustomTextOrDocument"]},defaultValue:"custom",options:[{label:br["fields:customURL"],value:"custom"},{label:br["fields:internalLink"],value:"internal"}]},{name:"url",label:br["fields:enterURL"],type:"text",required:!0,admin:{condition:({linkType:e,url:t})=>void 0===e&&t||"custom"===e}},{name:"doc",label:br["fields:chooseDocumentToLink"],type:"relationship",required:!0,relationTo:e.collections.map((({slug:e})=>e)),admin:{condition:({linkType:e})=>"internal"===e}},{name:"newTab",label:br["fields:openInNewTab"],type:"checkbox"}];var xr=r(80181),kr=r(33636),Cr=r(26644),Nr=r(46268),Tr=r(57087),Dr=r(5590),Or=(r(39686),r(69850));const Sr="rich-text-link-edit-modal",Mr=({handleClose:e,handleModalSubmit:t,initialState:r,fieldSchema:a,drawerSlug:o})=>{const{t:l}=(0,Pt.$)("fields");return n.createElement(wr.dy,{slug:o,formatSlug:!1,className:Sr},n.createElement(Or.T,{className:`${Sr}__template`},n.createElement("header",{className:`${Sr}__header`},n.createElement("h2",{className:`${Sr}__header-text`},l("editLink")),n.createElement(xr.Z,{className:`${Sr}__header-close`,buttonStyle:"none",onClick:e},n.createElement(kr.Z,null))),n.createElement(Cr.Z,{onSubmit:t,initialState:r},n.createElement(Dr.Z,{fieldTypes:Tr.Z,readOnly:!1,fieldSchema:a,forceRender:!0}),n.createElement(Nr.Z,null,l("general:submit")))))};var Br=r(89116),Rr=r(95050),Pr=r(19826),Lr=r(28630),Fr=r(40684),_r=r(93582),jr=r(28960);r(24362);const Ar="rich-text-link",Wr={Button:({fieldProps:e})=>{var t,r;const a=null===(r=null===(t=null==e?void 0:e.admin)||void 0===t?void 0:t.link)||void 0===r?void 0:r.fields,{t:l}=(0,Pt.$)(["upload","general"]),i=Me(),s=(0,gr.Z)(),[d]=(0,n.useState)((()=>{const e=[...yr(s)];return a&&e.push({name:"fields",type:"group",admin:{style:{margin:0,padding:0,borderTop:0,borderBottom:0}},fields:a}),e})),{openModal:c,closeModal:u}=(0,mr.useModal)(),f=(0,n.useId)(),h=(0,Er.D)(),m=(0,wr.CT)({slug:`rich-text-link-${f}`,depth:h});return n.createElement(n.Fragment,null,n.createElement(er,{format:"link",tooltip:l("fields:addLink"),className:"link",onClick:()=>{Yt(i,"link")?hr(i):c(m)}},n.createElement(pr,null)),n.createElement(Mr,{drawerSlug:m,handleModalSubmit:e=>{((e,t)=>{const r=e.selection&&o.Range.isCollapsed(e.selection),n=(0,vr.default)(t,!0),a={type:"link",linkType:n.linkType,url:n.url,doc:n.doc,newTab:n.newTab,fields:n.fields,children:[]};r||!e.selection?o.Transforms.insertNodes(e,{...a,children:[{text:String(n.text)}]}):e.selection&&(o.Transforms.wrapNodes(e,a,{split:!0}),o.Transforms.delete(e,{at:e.selection.focus.path,unit:"word"}),o.Transforms.move(e,{distance:1,unit:"offset"}),o.Transforms.insertText(e,String(n.text),{at:e.selection.focus.path})),ot.focus(e)})(i,e),u(m)},fieldSchema:d,handleClose:()=>{u(m)}}))},Element:e=>{var t,r;const{attributes:a,children:l,element:i,editorRef:s,fieldProps:d}=e,c=null===(r=null===(t=null==d?void 0:d.admin)||void 0===t?void 0:t.link)||void 0===r?void 0:r.fields,u=Me(),f=(0,gr.Z)(),{user:h}=(0,Lr.a)(),m=(0,Fr.bU)(),{t:p,i18n:v}=(0,Pt.$)("fields"),{openModal:g,toggleModal:E,closeModal:w}=(0,mr.useModal)(),[b,y]=(0,n.useState)(!1),[x,k]=(0,n.useState)(!1),[C,N]=(0,n.useState)({}),[T]=(0,n.useState)((()=>{const e=[...yr(f)];return c&&e.push({name:"fields",type:"group",admin:{style:{margin:0,padding:0,borderTop:0,borderBottom:0}},fields:c}),e})),D=(0,n.useId)(),O=(0,Er.D)(),S=(0,wr.CT)({slug:`rich-text-link-${D}`,depth:O}),M=(0,n.useCallback)((e=>{e||k(e)}),[]);return(0,n.useEffect)((()=>{(async()=>{const e={text:o.Node.string(i),linkType:i.linkType,url:i.url,doc:i.doc,newTab:i.newTab,fields:(0,_r.Z)(i.fields)},t=await(0,Pr.Z)({fieldSchema:T,data:e,user:h,operation:"update",locale:m,t:p});N(t)})()}),[b,i,T,h,m,p]),n.createElement("span",{className:Ar,...a},n.createElement("span",{style:{userSelect:"none"},contentEditable:!1},b&&n.createElement(Mr,{drawerSlug:S,fieldSchema:T,handleClose:()=>{E(S),y(!1)},handleModalSubmit:e=>{((e,t,r)=>{const n=(0,vr.default)(t,!0),[,a]=o.Editor.above(e),l={newTab:n.newTab,url:n.url,linkType:n.linkType,doc:n.doc};r&&(l.fields=n.fields),o.Transforms.setNodes(e,l,{at:a}),o.Transforms.delete(e,{at:e.selection.focus.path,unit:"block"}),o.Transforms.move(e,{distance:1,unit:"offset"}),o.Transforms.insertText(e,String(n.text),{at:e.selection.focus.path}),ot.focus(e)})(u,e,c),w(S)},initialState:C}),n.createElement(Rr.Z,{buttonType:"none",size:"small",forceOpen:x,onToggleOpen:M,horizontalAlign:"left",verticalAlign:"bottom",boundingRef:s,render:()=>{var e,t,r,a;return n.createElement("div",{className:`${Ar}__popup`},"internal"===i.linkType&&(null===(e=i.doc)||void 0===e?void 0:e.relationTo)&&(null===(t=i.doc)||void 0===t?void 0:t.value)&&n.createElement(Br.c,{i18nKey:"fields:linkedTo",values:{label:(0,jr.i)(null===(a=null===(r=f.collections.find((({slug:e})=>e===i.doc.relationTo)))||void 0===r?void 0:r.labels)||void 0===a?void 0:a.singular,v)}},n.createElement("a",{className:`${Ar}__link-label`,href:`${f.routes.admin}/collections/${i.doc.relationTo}/${i.doc.value}`,target:"_blank",rel:"noreferrer"},"label")),("custom"===i.linkType||!i.linkType)&&n.createElement("a",{className:`${Ar}__link-label`,href:i.url,target:"_blank",rel:"noreferrer"},i.url),n.createElement(xr.Z,{className:`${Ar}__link-edit`,icon:"edit",round:!0,buttonStyle:"icon-label",onClick:e=>{e.preventDefault(),k(!1),g(S),y(!0)},tooltip:p("general:edit")}),n.createElement(xr.Z,{className:`${Ar}__link-close`,icon:"x",round:!0,buttonStyle:"icon-label",onClick:e=>{e.preventDefault(),hr(u)},tooltip:p("general:remove")}))}})),n.createElement("span",{tabIndex:0,role:"button",className:[`${Ar}__popup-toggler`].filter(Boolean).join(" "),onKeyDown:e=>{"Enter"===e.key&&k(!0)},onClick:()=>k(!0)},l))},plugins:[e=>{const t=e,{isInline:r}=t;return t.isInline=e=>"link"===e.type||r(e),t}]},zr=Wr,Hr=(e,t)=>{const r=o.Editor.unhangRange(e,e.selection,{voids:!0}),[n,a]=o.Node.common(e,r.anchor.path,r.focus.path);return o.Editor.isBlock(e,n)||o.Editor.isEditor(n)?[n,a]:o.Editor.above(e,{at:a,match:t||(t=>o.Editor.isBlock(e,t)||o.Editor.isEditor(t))})},$r=(e,t)=>{if(!e.selection)return!1;const[r,n]=Hr(e);if(o.Editor.isEditor(r))return!1;const[a]=Array.from(o.Editor.nodes(e,{at:n,mode:"lowest",match:(e,r)=>!o.Editor.isEditor(e)&&o.Element.isElement(e)&&e.type===t&&r.length>=n.length-2}));return!!a},Ir=["ol","ul"],Vr=e=>Array.isArray(e.children)&&e.children.every((e=>o.Element.isElement(e))),Ur=(e,t)=>{o.Transforms.setNodes(e,{type:void 0},{at:t,match:(e,r)=>{const n=Vr(e);return!o.Editor.isEditor(e)&&o.Element.isElement(e)&&!n&&"li"===e.type&&r.length===t.length+1}}),o.Transforms.unwrapNodes(e,{at:t,match:(e,r)=>{const n=Vr(e);return!o.Editor.isEditor(e)&&o.Element.isElement(e)&&n&&"li"===e.type&&r.length===t.length+1}}),o.Transforms.unwrapNodes(e,{match:e=>o.Element.isElement(e)&&Ir.includes(e.type),mode:"lowest"})},Zr=(e,t)=>{let r;if($r(e,"ol")&&(r="ol"),$r(e,"ul")&&(r="ul"),r===t){const r=o.Node.descendant(e,e.selection.anchor.path);if(o.Text.isText(r)&&0===String(r.text).length)o.Transforms.unwrapNodes(e,{match:e=>o.Element.isElement(e)&&Ir.includes(e.type),split:!0,mode:"lowest"}),o.Transforms.setNodes(e,{type:void 0});else{const[,r]=Hr(e,(e=>o.Element.isElement(e)&&e.type===t));Ur(e,r)}}else if(r&&r!==t)o.Transforms.setNodes(e,{type:t},{match:e=>o.Element.isElement(e)&&Ir.includes(e.type),mode:"lowest"});else{o.Transforms.wrapNodes(e,{type:t,children:[]});const[,r]=Hr(e,(e=>o.Element.isElement(e)&&e.type===t));o.Transforms.setNodes(e,{type:"li"},{voids:!0,match:(e,t)=>o.Element.isElement(e)&&void 0===e.type&&t.length===r.length+1});Array.from(o.Editor.nodes(e,{match:(e,t)=>o.Element.isElement(e)&&void 0!==e.type&&"li"!==e.type&&t.length===r.length+1})).forEach((([,t])=>{o.Transforms.wrapNodes(e,{type:"li",children:[]},{at:t})}))}ot.focus(e)},qr="rich-text__button",Kr=({format:e,children:t,onClick:r,className:a})=>{const o=Me(),l=(0,n.useCallback)((t=>{t.preventDefault(),Zr(o,e)}),[o,e]);return n.createElement("button",{type:"button",className:[qr,a,$r(o,e)&&`${qr}__button--active`].filter(Boolean).join(" "),onClick:r||l},t)},Jr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic ordered-list-icon"},n.createElement("path",{className:"fill",d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}));r(99529);const Yr={Button:()=>n.createElement(Kr,{format:"ol"},n.createElement(Jr,null)),Element:({attributes:e,children:t})=>n.createElement("ol",{className:"rich-text-ol",...e},t)},Xr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic unordered-list-icon"},n.createElement("path",{className:"fill",d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),n.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}));r(88767);const Qr={Button:()=>n.createElement(Kr,{format:"ul"},n.createElement(Xr,null)),Element:({attributes:e,children:t})=>n.createElement("ul",{className:"rich-text-ul",...e},t)},Gr={Element:e=>{var t,r;const{attributes:a,element:o,children:l}=e,i=o.children.length>=1&&Ir.includes(null===(r=null===(t=o.children)||void 0===t?void 0:t[0])||void 0===r?void 0:r.type);return n.createElement("li",{style:{listStyle:i?"none":void 0},...a},l)}};r(30958);const en=()=>n.createElement("svg",{className:"icon icon--indent-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},n.createElement("path",{d:"M16.005 9.61502L21.005 13.1864L21.005 6.04361L16.005 9.61502Z",className:"fill"}),n.createElement("rect",{x:"5",y:"5.68199",width:"9.0675",height:"2.15625",className:"fill"}),n.createElement("rect",{x:"5",y:"11.4738",width:"9.0675",height:"2.15625",className:"fill"}),n.createElement("rect",{x:"5",y:"17.2656",width:"16.005",height:"2.15625",className:"fill"}));r(73928);const tn=()=>n.createElement("svg",{className:"icon icon--indent-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},n.createElement("path",{d:"M10 9.61502L5 6.04361L5 13.1864L10 9.61502Z",className:"fill"}),n.createElement("rect",{x:"11.9375",y:"5.68199",width:"9.0675",height:"2.15625",className:"fill"}),n.createElement("rect",{x:"11.9375",y:"11.4738",width:"9.0675",height:"2.15625",className:"fill"}),n.createElement("rect",{x:"5",y:"17.2656",width:"16.005",height:"2.15625",className:"fill"})),rn="indent",nn={Button:()=>{const e=Me(),t=(0,n.useCallback)(((t,r)=>{if(t.preventDefault(),"left"===r)if(Yt(e,"li")){const[,t]=Hr(e,(e=>o.Element.isElement(e)&&Ir.includes(e.type))),r=o.Editor.above(e,{at:t,match:t=>!o.Editor.isEditor(t)&&o.Editor.isBlock(e,t)});if(r){const[t,n]=r;if(t.children.length>1){o.Transforms.unwrapNodes(e,{at:n,match:(e,t)=>!o.Editor.isEditor(e)&&o.Element.isElement(e)&&Ir.includes(e.type)&&t.length===n.length+1}),o.Transforms.setNodes(e,{type:"li"},{at:n,match:(e,t)=>!o.Editor.isEditor(e)&&o.Element.isElement(e)&&"li"!==e.type&&t.length===n.length+1});const[t]=o.Editor.node(e,n);o.Element.isElement(t)&&"li"===t.type&&o.Transforms.liftNodes(e,{at:n,match:(e,t)=>!o.Editor.isEditor(e)&&o.Element.isElement(e)&&t.length===n.length+1&&"li"===e.type})}else o.Transforms.unwrapNodes(e,{at:n,match:(e,t)=>o.Element.isElement(e)&&"li"===e.type&&t.length===n.length}),o.Transforms.unwrapNodes(e,{match:e=>o.Element.isElement(e)&&Ir.includes(e.type)})}else Ur(e,t)}else o.Transforms.unwrapNodes(e,{match:e=>o.Element.isElement(e)&&e.type===rn,split:!0,mode:"lowest"});if("right"===r){const t=Yt(e,"ol"),r=Yt(e,"ul");if(t||r){const[[,r]]=Array.from(o.Editor.nodes(e,{mode:"lowest",match:e=>o.Element.isElement(e)&&"li"===e.type}));if(r[r.length-1]>0){const[,n]=o.Editor.previous(e,{at:r}),[a]=o.Editor.node(e,[...n,0]);o.Text.isText(a)&&o.Transforms.wrapNodes(e,{children:[]},{at:[...n,0]}),o.Transforms.moveNodes(e,{to:[...n,1],match:e=>o.Element.isElement(e)&&"li"===e.type,mode:"lowest"}),o.Transforms.wrapNodes(e,{type:t?"ol":"ul",children:[]},{match:e=>o.Element.isElement(e)&&"li"===e.type,mode:"lowest"})}else o.Transforms.wrapNodes(e,{type:t?"ol":"ul",children:[{type:"li",children:[]}]},{match:e=>o.Element.isElement(e)&&"li"===e.type,mode:"lowest"})}else o.Transforms.wrapNodes(e,{type:rn,children:[]})}ot.focus(e)}),[e]),r=Yt(e,"li")||Yt(e,rn);return n.createElement(n.Fragment,null,n.createElement("button",{type:"button",className:[Gt,!r&&`${Gt}--disabled`].filter(Boolean).join(" "),onClick:r?e=>t(e,"left"):void 0},n.createElement(en,null)),n.createElement("button",{type:"button",className:Gt,onClick:e=>t(e,"right")},n.createElement(tn,null)))},Element:({attributes:e,children:t})=>n.createElement("div",{style:{paddingLeft:25},...e},t)},an=nn,on=e=>{const t=e,{isVoid:r}=t;return t.isVoid=e=>"relationship"===e.type||r(e),t};var ln=r(47489),sn=r(39751),dn=r(58987);r(16654);const cn="rich-text-relationship",un={depth:0},fn=e=>{var t,r,a,l,i,s;const{attributes:d,children:c,element:u,fieldProps:f}=e,{relationTo:h,value:m}=u,{collections:p,serverURL:v,routes:{api:g}}=(0,gr.Z)(),[E]=(0,n.useState)((()=>p.filter((({admin:{enableRichTextRelationship:e}})=>e)).map((({slug:e})=>e)))),[w,b]=(0,n.useState)((()=>p.find((e=>e.slug===h)))),y=be(),x=gt(),{t:k,i18n:C}=(0,Pt.$)(["fields","general"]),N=ge(),[T,D]=(0,n.useReducer)((e=>e+1),0),[{data:O},{setParams:S}]=(0,ln.Z)(`${v}${g}/${w.slug}/${null==m?void 0:m.id}`,{initialParams:un}),[M,B,{closeDrawer:R}]=(0,sn.Zr)({collectionSlug:w.slug,id:null==m?void 0:m.id}),[P,L,{closeDrawer:F}]=(0,dn.Ss)({collectionSlugs:E,selectedCollection:w.slug}),_=(0,n.useCallback)((()=>{const e=ot.findPath(N,u);o.Transforms.removeNodes(N,{at:e})}),[N,u]),j=n.useCallback((({doc:e})=>{const t=ot.findPath(N,u);o.Transforms.setNodes(N,{type:"relationship",value:{id:e.id},relationTo:w.slug,children:[{text:" "}]},{at:t}),S({...un,cacheBust:T}),R(),D()}),[N,u,w,T,S,R]),A=n.useCallback((({docID:e,collectionConfig:t})=>{const r=ot.findPath(N,u);o.Transforms.setNodes(N,{type:"relationship",value:{id:e},relationTo:t.slug,children:[{text:" "}]},{at:r}),b(p.find((e=>e.slug===t.slug))),S({...un,cacheBust:T}),F(),D()}),[F,N,u,T,S,p]);return n.createElement("div",{className:[cn,y&&x&&`${cn}--selected`].filter(Boolean).join(" "),contentEditable:!1,...d},n.createElement("div",{className:`${cn}__wrap`},n.createElement("p",{className:`${cn}__label`},k("labelRelationship",{label:(0,jr.i)(w.labels.singular,C)})),n.createElement("p",{className:`${cn}__title`},O[(null===(t=null==w?void 0:w.admin)||void 0===t?void 0:t.useAsTitle)||"id"])),n.createElement("div",{className:`${cn}__actions`},(null==m?void 0:m.id)&&n.createElement(B,{className:`${cn}__toggler`,disabled:null===(r=null==f?void 0:f.admin)||void 0===r?void 0:r.readOnly},n.createElement(xr.Z,{icon:"edit",round:!0,buttonStyle:"icon-label",el:"div",className:`${cn}__actionButton`,onClick:e=>{e.preventDefault()},tooltip:k("general:editLabel",{label:(0,jr.i)(w.labels.singular,C)}),disabled:null===(a=null==f?void 0:f.admin)||void 0===a?void 0:a.readOnly})),n.createElement(L,{disabled:null===(l=null==f?void 0:f.admin)||void 0===l?void 0:l.readOnly},n.createElement(xr.Z,{icon:"swap",round:!0,buttonStyle:"icon-label",className:`${cn}__actionButton`,onClick:()=>{},el:"div",tooltip:k("swapRelationship"),disabled:null===(i=null==f?void 0:f.admin)||void 0===i?void 0:i.readOnly})),n.createElement(xr.Z,{icon:"x",round:!0,buttonStyle:"icon-label",className:`${cn}__actionButton`,onClick:e=>{e.preventDefault(),_()},tooltip:k("fields:removeRelationship"),disabled:null===(s=null==f?void 0:f.admin)||void 0===s?void 0:s.readOnly})),(null==m?void 0:m.id)&&n.createElement(M,{onSave:j}),n.createElement(P,{onSelect:A}),c)};r(13981);const hn=()=>n.createElement("svg",{className:"icon icon--relationship",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},n.createElement("path",{d:"M19.0597 14.9691L19.0597 19.0946L6.01681 19.0946L6.01681 6.03028L10.0948 6.03028",className:"stroke",strokeWidth:"2"}),n.createElement("path",{d:"M19.0597 11.0039L19.0597 6.00387L14.0597 6.00387",className:"stroke",strokeWidth:"2"}),n.createElement("line",{x1:"18.7061",y1:"6.40767",x2:"13.0493",y2:"12.0645",className:"stroke",strokeWidth:"2"}));const mn=(e,t)=>{const r=(e=>{var t,r;if(!e.selection)return!1;const n=Array.from(o.Editor.nodes(e,{at:o.Editor.unhangRange(e,e.selection),match:e=>!o.Editor.isEditor(e)&&o.Element.isElement(e)&&(!e.type||"p"===e.type)})),a=null==n?void 0:n[(null==n?void 0:n.length)-1];return a&&o.Element.isElement(a[0])&&(!a[0].type||"p"===a[0].type)&&"text"in(null===(t=a[0].children)||void 0===t?void 0:t[0])&&""===(null===(r=a[0].children)||void 0===r?void 0:r[0].text)})(e),n=o.Editor.previous(e);r?o.Editor.isVoid(e,null==n?void 0:n[0])?(o.Transforms.insertNodes(e,{children:[{text:""}]}),o.Transforms.setNodes(e,t)):o.Transforms.setNodes(e,t):o.Transforms.insertNodes(e,t),o.Transforms.insertNodes(e,{children:[{text:""}]})};r(38723);const pn=()=>{const{collections:e}=(0,gr.Z)(),{t}=(0,Pt.$)("fields"),r=Me(),[a]=(0,n.useState)((()=>e.filter((({admin:{enableRichTextRelationship:e}})=>e)).map((({slug:e})=>e)))),[o,l]=(0,n.useState)((()=>a[0])),[i,s,{closeDrawer:d,isDrawerOpen:c}]=(0,dn.Ss)({collectionSlugs:a,selectedCollection:o}),u=(0,n.useCallback)((({docID:e,collectionConfig:t})=>{((e,{value:t,relationTo:r})=>{mn(e,{type:"relationship",value:t,relationTo:r,children:[{text:" "}]}),ot.focus(e)})(r,{value:{id:e},relationTo:t.slug}),d()}),[r,d]);return(0,n.useEffect)((()=>{l(a[0])}),[c,a]),a&&0!==a.length?n.createElement(n.Fragment,null,n.createElement(s,null,n.createElement(er,{className:"relationship-rich-text-button",format:"relationship",tooltip:t("addRelationship"),el:"div",onClick:()=>{}},n.createElement(hn,null))),n.createElement(i,{onSelect:u})):null},vn={Button:pn,Element:fn,plugins:[on]},gn=e=>{const t=e,{isVoid:r}=t;return t.isVoid=e=>"upload"===e.type||r(e),t};var En=r(58499),wn=r(75643);r(52835);const bn="rich-text-upload",yn={depth:0},xn=({attributes:e,children:t,element:r})=>{var a,l,i;const{relationTo:s,value:d,fieldProps:c}=r,{collections:u,serverURL:f,routes:{api:h}}=(0,gr.Z)(),{t:m,i18n:p}=(0,Pt.$)("fields"),[v,g]=(0,n.useReducer)((e=>e+1),0),[E,w]=(0,n.useState)((()=>u.find((e=>e.slug===s)))),[b,y,{closeDrawer:x}]=(0,dn.Ss)({uploads:!0,selectedCollection:E.slug}),[k,C,{closeDrawer:N}]=(0,sn.Zr)({collectionSlug:E.slug,id:null==d?void 0:d.id}),T=ge(),D=be(),O=gt(),[{data:S},{setParams:M}]=(0,ln.Z)(`${f}${h}/${E.slug}/${null==d?void 0:d.id}`,{initialParams:yn}),B=(0,wn.Z)(E,S),R=(0,n.useCallback)((()=>{const e=ot.findPath(T,r);o.Transforms.removeNodes(T,{at:e})}),[T,r]),P=(0,n.useCallback)((e=>{const{doc:t}=e,n={fields:t},a=ot.findPath(T,r);o.Transforms.setNodes(T,n,{at:a}),M({...yn,cacheBust:v}),g(),N()}),[T,r,M,v,N]),L=n.useCallback((({docID:e,collectionConfig:t})=>{const n={type:"upload",value:{id:e},relationTo:t.slug,children:[{text:" "}]},a=ot.findPath(T,r);w(u.find((e=>e.slug===t.slug))),o.Transforms.setNodes(T,n,{at:a}),g(),x()}),[x,T,r,u]);return n.createElement("div",{className:[bn,D&&O&&`${bn}--selected`].filter(Boolean).join(" "),contentEditable:!1,...e},n.createElement("div",{className:`${bn}__card`},n.createElement("div",{className:`${bn}__topRow`},n.createElement("div",{className:`${bn}__thumbnail`},B?n.createElement("img",{src:B,alt:null==S?void 0:S.filename}):n.createElement(En.Z,null)),n.createElement("div",{className:`${bn}__topRowRightPanel`},n.createElement("div",{className:`${bn}__collectionLabel`},(0,jr.i)(E.labels.singular,p)),n.createElement("div",{className:`${bn}__actions`},(null==d?void 0:d.id)&&n.createElement(C,{className:`${bn}__toggler`},n.createElement(xr.Z,{icon:"edit",round:!0,buttonStyle:"icon-label",el:"div",className:`${bn}__actionButton`,onClick:e=>{e.preventDefault()},tooltip:m("general:editLabel",{label:E.labels.singular}),disabled:null===(a=null==c?void 0:c.admin)||void 0===a?void 0:a.readOnly})),n.createElement(y,null,n.createElement(xr.Z,{icon:"swap",round:!0,buttonStyle:"icon-label",className:`${bn}__actionButton`,onClick:()=>{},el:"div",tooltip:m("swapUpload"),disabled:null===(l=null==c?void 0:c.admin)||void 0===l?void 0:l.readOnly})),n.createElement(xr.Z,{icon:"x",round:!0,buttonStyle:"icon-label",className:`${bn}__actionButton`,onClick:e=>{e.preventDefault(),R()},tooltip:m("removeUpload"),disabled:null===(i=null==c?void 0:c.admin)||void 0===i?void 0:i.readOnly})))),n.createElement("div",{className:`${bn}__bottomRow`},n.createElement("strong",null,null==S?void 0:S.filename))),t,(null==d?void 0:d.id)&&n.createElement(k,{onSave:P}),n.createElement(b,{onSelect:L}))};r(71168);const kn=()=>n.createElement("svg",{className:"icon icon--upload",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},n.createElement("path",{d:"M20.06,5.12h-15v15h15Zm-2,2v7L15.37,11l-3.27,4.1-2-1.58-3,3.74V7.12Z",className:"fill"}),n.createElement("circle",{cx:"9.69",cy:"9.47",r:"0.97",className:"fill"}));r(59622);const Cn=()=>{const{t:e}=(0,Pt.$)(["upload","general"]),t=Me(),[r,a,{closeDrawer:o}]=(0,dn.Ss)({uploads:!0}),l=(0,n.useCallback)((({docID:e,collectionConfig:r})=>{((e,{value:t,relationTo:r})=>{mn(e,{type:"upload",value:t,relationTo:r,children:[{text:" "}]}),ot.focus(e)})(t,{value:{id:e},relationTo:r.slug}),o()}),[t,o]);return n.createElement(n.Fragment,null,n.createElement(a,null,n.createElement(er,{className:"upload-rich-text-button",format:"upload",tooltip:e("fields:addUpload"),el:"div",onClick:()=>{}},n.createElement(kn,null))),n.createElement(r,{onSelect:l}))},Nn={h1:rr,h2:ar,h3:lr,h4:sr,h5:cr,h6:fr,link:zr,ol:Yr,ul:Qr,li:Gr,indent:an,relationship:vn,upload:{Button:Cn,Element:xn,plugins:[gn]}},Tn={"mod+b":"bold","mod+i":"italic","mod+u":"underline","mod+`":"code"},Dn=(e,t)=>"function"==typeof t?t(e):e,On=(e,t)=>t.reduce(((e,t)=>{if("object"==typeof t&&Array.isArray(t.plugins))return t.plugins.reduce(Dn,e);if("string"==typeof t){if(Nn[t]&&Nn[t].plugins)return Nn[t].plugins.reduce(Dn,e);if(Jt[t]&&Jt[t].plugins)return Jt[t].plugins.reduce(Dn,e)}return e}),e);var Sn=r(92077),Mn=r(77070);function Bn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rn=new WeakMap,Pn=new WeakMap;class Ln{}class Fn extends Ln{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();var{offset:t,path:r}=e;this.offset=t,this.path=r}}class _n extends Ln{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();var{offset:t,path:r}=e;this.offset=t,this.path=r}}var jn=e=>Pn.get(e);function An(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?An(Object(r),!0).forEach((function(t){Bn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):An(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zn=new WeakSet,Hn=e=>{var t=[],r=e=>{if(null!=e){var n=t[t.length-1];if("string"==typeof e){var a={text:e};zn.add(a),e=a}if(o.Text.isText(e)){var l=e;o.Text.isText(n)&&zn.has(n)&&zn.has(l)&&o.Text.equals(n,l,{loose:!0})?n.text+=l.text:t.push(l)}else if(o.Element.isElement(e))t.push(e);else{if(!(e instanceof Ln))throw new Error("Unexpected hyperscript child object: ".concat(e));var i=t[t.length-1];o.Text.isText(i)||(r(""),i=t[t.length-1]),e instanceof Fn?((e,t)=>{var r=e.text.length;Rn.set(e,[r,t])})(i,e):e instanceof _n&&((e,t)=>{var r=e.text.length;Pn.set(e,[r,t])})(i,e)}}};for(var n of e.flat(1/0))r(n);return t};function $n(e,t,r){return Wn(Wn({},t),{},{children:Hn(r)})}function In(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?In(Object(r),!0).forEach((function(t){Bn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):In(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Un={anchor:function(e,t,r){return new Fn(t)},cursor:function(e,t,r){return[new Fn(t),new _n(t)]},editor:function(e,t,r){var n,a=[];for(var l of r)o.Range.isRange(l)?n=l:a.push(l);var i,s=Hn(a),d={},c=(0,o.createEditor)();for(var[u,f]of(Object.assign(c,t),c.children=s,o.Node.texts(c))){var h=(i=u,Rn.get(i)),m=jn(u);if(null!=h){var[p]=h;d.anchor={path:f,offset:p}}if(null!=m){var[v]=m;d.focus={path:f,offset:v}}}if(d.anchor&&!d.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<anchor />`. For collapsed selections, use `<cursor />` instead.");if(!d.anchor&&d.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<focus />`. For collapsed selections, use `<cursor />` instead.");return null!=n?c.selection=n:o.Range.isRange(d)&&(c.selection=d),c},element:$n,focus:function(e,t,r){return new _n(t)},fragment:function(e,t,r){return Hn(r)},selection:function(e,t,r){var n=r.find((e=>e instanceof Fn)),a=r.find((e=>e instanceof _n));if(!n||null==n.offset||null==n.path)throw new Error("The <selection> hyperscript tag must have an <anchor> tag as a child with `path` and `offset` attributes defined.");if(!a||null==a.offset||null==a.path)throw new Error("The <selection> hyperscript tag must have a <focus> tag as a child with `path` and `offset` attributes defined.");return Wn({anchor:{offset:n.offset,path:n.path},focus:{offset:a.offset,path:a.path}},t)},text:function(e,t,r){var n=Hn(r);if(n.length>1)throw new Error("The <text> hyperscript tag must only contain a single node's worth of children.");var[a]=n;if(null==a&&(a={text:""}),!o.Text.isText(a))throw new Error("\n    The <text> hyperscript tag can only contain text content as children.");return zn.delete(a),Object.assign(a,t),a}},Zn=e=>function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];var l=e[t];if(!l)throw new Error("No hyperscript creator found for tag: <".concat(t,">"));null==r&&(r={}),(0,Ct.P)(r)||(a=[r].concat(a),r={});var i=l(t,r,a=a.filter((e=>Boolean(e))).flat());return i},qn=e=>{var t={},r=function(r){var n=e[r];if("object"!=typeof n)throw new Error("Properties specified for a hyperscript shorthand should be an object, but for the custom element <".concat(r,">  tag you passed: ").concat(n));t[r]=(e,t,r)=>$n(0,Vn(Vn({},n),t),r)};for(var n in e)r(n);return t},Kn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{elements:t={}}=e,r=qn(t),n=Vn(Vn(Vn({},Un),r),e.creators),a=Zn(n);return a}();const Jn={A:e=>({type:"link",newTab:"_blank"===e.getAttribute("target"),url:e.getAttribute("href")}),BLOCKQUOTE:()=>({type:"blockquote"}),H1:()=>({type:"h1"}),H2:()=>({type:"h2"}),H3:()=>({type:"h3"}),H4:()=>({type:"h4"}),H5:()=>({type:"h5"}),H6:()=>({type:"h6"}),LI:()=>({type:"li"}),OL:()=>({type:"ol"}),P:()=>({type:"p"}),PRE:()=>({type:"code"}),UL:()=>({type:"ul"})},Yn={CODE:()=>({code:!0}),DEL:()=>({strikethrough:!0}),EM:()=>({italic:!0}),I:()=>({italic:!0}),S:()=>({strikethrough:!0}),STRONG:()=>({bold:!0}),U:()=>({underline:!0})},Xn=e=>{if(3===e.nodeType)return e.textContent;if(1!==e.nodeType)return null;if("BR"===e.nodeName)return"\n";const{nodeName:t}=e;let r=e;"PRE"===t&&e.childNodes[0]&&"CODE"===e.childNodes[0].nodeName&&([r]=e.childNodes);let n=Array.from(r.childNodes).map(Xn).flat();if(0===n.length&&(n=[{text:""}]),"BODY"===e.nodeName)return Kn("fragment",{},n);if(Jn[t]){const r=Jn[t](e);return Kn("element",r,n)}if(Yn[t]){const r=Yn[t](e);return n.map((e=>Kn("text",r,e)))}return n},Qn=e=>{const{insertData:t}=e,r=e;return r.insertData=e=>{if(!e.types.includes("application/x-slate-fragment")){const t=e.getData("text/html");if(t){const e=(new DOMParser).parseFromString(t,"text/html"),n=Xn(e.body);return void o.Transforms.insertFragment(r,n)}}t(e)},r},Gn=(e,t)=>{const r=[...e];return(e.indexOf("ul")>-1||e.indexOf("ol")>-1)&&r.push("li"),r.reduce(((e,r)=>"object"==typeof r&&r.name?{...e,[r.name]:r}:"string"==typeof r&&t[r]?{...e,[r]:t[r]}:e),{})},ea=["h1","h2","h3","h4","h5","h6","link"],ta=e=>{const t=e;return t.shouldBreakOutOnEnter=e=>ea.includes(String(e.type)),t};r(33329);const ra=["h1","h2","h3","h4","h5","h6","ul","ol","indent","link","relationship","upload"],na=["bold","italic","underline","strikethrough","code"],aa="rich-text",oa=jt()((e=>{const{path:t,name:r,required:l,validate:i=Lt.richText,label:s,admin:d,admin:{readOnly:c,style:u,className:f,width:h,placeholder:m,description:p,condition:v,hideGutter:g}={}}=e,E=(null==d?void 0:d.elements)||ra,w=(null==d?void 0:d.leaves)||na,b=t||r,{i18n:y}=(0,Pt.$)(),[x,k]=(0,n.useState)(!1),[C,N]=(0,n.useState)({}),[T,D]=(0,n.useState)({}),O=(0,n.useRef)(null),S=(0,n.useRef)(null),M=(0,Er.D)()>1,B=(0,n.useCallback)((({attributes:t,children:r,element:a})=>{const o=C[null==a?void 0:a.type],l=null==o?void 0:o.Element;return l?n.createElement(l,{attributes:t,element:a,path:b,fieldProps:e,editorRef:O},r):n.createElement("div",{...t},r)}),[C,b,e]),R=(0,n.useCallback)((({attributes:t,children:r,leaf:a})=>{const o=Object.entries(T).filter((([e])=>a[e]));return o.length>0?o.reduce(((t,[r],o)=>{var l,i;if(null===(l=T[r])||void 0===l?void 0:l.Leaf){const l=null===(i=T[r])||void 0===i?void 0:i.Leaf;return n.createElement(l,{key:o,leaf:a,path:b,fieldProps:e,editorRef:O},t)}return t}),n.createElement("span",{...t},r)):n.createElement("span",{...t},r)}),[T,b,e]),P=(0,n.useCallback)(((e,t)=>i(e,{...t,required:l})),[i,l]),L=(0,Ft.Z)({path:b,validate:P,condition:v}),{value:F,showError:_,setValue:j,errorMessage:A,initialValue:W}=L,z=[aa,"field-type",f,_&&"error",c&&`${aa}--read-only`,!g&&`${aa}--gutter`].filter(Boolean).join(" "),H=(0,n.useMemo)((()=>{let e=ta((e=>{var t=e,{apply:r}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:e}=t,{redos:r}=e;if(r.length>0){var n=r[r.length-1];Ot.withoutSaving(t,(()=>{o.Editor.withoutNormalizing(t,(()=>{for(var e of n)t.apply(e)}))})),e.redos.pop(),e.undos.push(n)}},t.undo=()=>{var{history:e}=t,{undos:r}=e;if(r.length>0){var n=r[r.length-1];Ot.withoutSaving(t,(()=>{o.Editor.withoutNormalizing(t,(()=>{var e=n.map(o.Operation.inverse).reverse();for(var r of e)t.apply(r)}))})),e.redos.push(n),e.undos.pop()}},t.apply=e=>{var{operations:n,history:a}=t,{undos:o}=a,l=o[o.length-1],i=l&&l[l.length-1],s=Bt(e,i),d=Ot.isSaving(t),c=Ot.isMerging(t);if(null==d&&(d=Mt(e)),d){if(null==c&&(c=null!=l&&(0!==n.length||St(e,i)||s)),l&&c)s&&l.pop(),l.push(e);else{var u=[e];o.push(u)}for(;o.length>100;)o.shift();Rt(e)&&(a.redos=[])}r(e)},t})(xt((0,o.createEditor)())));return e=Qn(e),e=On(e,E),e=On(e,w),e}),[E,w]),$=(0,n.useCallback)((e=>{const t=H.operations.filter((e=>!!e&&"set_selection"!==e.type));t&&Array.isArray(t)&&t.length>0&&(c||e===Sn.default||e===F||j(e))}),[H.operations,c,j,F]);if((0,n.useEffect)((()=>{if(!x){const e=Gn(E,Nn),t=Gn(w,Jt);N(e),D(t),k(!0)}}),[x,E,w]),(0,n.useEffect)((()=>{function e(e){var t,r;const n='button, a, [role="button"]';[...(null===(t=S.current)||void 0===t?void 0:t.querySelectorAll(n))||[],...(null===(r=O.current)||void 0===r?void 0:r.querySelectorAll(n))||[]].forEach((t=>{const r="BUTTON"===t.tagName,n="disabled"===e;t.setAttribute("tabIndex",n?"-1":"0"),r&&t.setAttribute("disabled",n?"disabled":null)}))}return x&&c&&e("disabled"),()=>{x&&c&&e("enabled")}}),[x,c]),(0,n.useEffect)((()=>{Array.isArray(W)&&W.length>0&&(H.selection&&ot.deselect(H),H.history={redos:[],undos:[]})}),[W,H]),!x)return null;let I=F;if("string"==typeof I)try{I=JSON.parse(I)}catch(e){}return I||(I=Sn.default),n.createElement("div",{className:z,style:{...u,width:h}},n.createElement("div",{className:`${aa}__wrap`},n.createElement(Wt.Z,{showError:_,message:A}),n.createElement(At.Z,{htmlFor:`field-${b.replace(/\./gi,"__")}`,label:s,required:l}),n.createElement(wt,{editor:H,value:I,onChange:$},n.createElement("div",{className:`${aa}__wrapper`},n.createElement("div",{className:[`${aa}__toolbar`,M&&`${aa}__drawerIsOpen`].filter(Boolean).join(" "),ref:S},n.createElement("div",{className:`${aa}__toolbar-wrap`},E.map(((t,r)=>{let a;"object"==typeof t&&(null==t?void 0:t.name)&&(a=t.name),"string"==typeof t&&(a=t);const o=C[a],l=null==o?void 0:o.Button;return l?n.createElement(l,{fieldProps:e,key:r,path:b}):null})),w.map(((t,r)=>{let a;"object"==typeof t&&(null==t?void 0:t.name)&&(a=t.name),"string"==typeof t&&(a=t);const o=T[a],l=null==o?void 0:o.Button;return l?n.createElement(l,{fieldProps:e,key:r,path:b}):null})))),n.createElement("div",{className:`${aa}__editor`,ref:O},n.createElement(kt,{id:`field-${b.replace(/\./gi,"__")}`,className:`${aa}__input`,renderElement:B,renderLeaf:R,placeholder:(0,jr.i)(m,y),spellCheck:!0,readOnly:c,onKeyDown:e=>{if("Enter"===e.key)if(e.shiftKey)e.preventDefault(),H.insertText("\n");else{const t=o.Node.descendant(H,H.selection.anchor.path.slice(0,-1));if(o.Element.isElement(t)&&H.shouldBreakOutOnEnter(t)){e.preventDefault();const t=o.Node.descendant(H,H.selection.anchor.path);o.Text.isText(t)&&String(t.text).length===H.selection.anchor.offset?o.Transforms.insertNodes(H,{children:[{text:""}]}):(o.Transforms.splitNodes(H),o.Transforms.setNodes(H,{}))}}if("Backspace"===e.key){const t=o.Node.descendant(H,H.selection.anchor.path.slice(0,-1));if(o.Element.isElement(t)&&"li"===t.type){const t=o.Node.descendant(H,H.selection.anchor.path);o.Text.isText(t)&&0===String(t.text).length&&(e.preventDefault(),o.Transforms.unwrapNodes(H,{match:e=>o.Element.isElement(e)&&Ir.includes(e.type),split:!0,mode:"lowest"}),o.Transforms.setNodes(H,{type:void 0}))}else H.isVoid(t)&&o.Transforms.removeNodes(H)}Object.keys(Tn).forEach((t=>{if((0,a.ZP)(t,e)){e.preventDefault();Ht(H,Tn[t])}}))}})))),n.createElement(Mn.Z,{value:F,description:p})))}))},59619:(e,t)=>{"use strict";for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},a={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},l=1;l<20;l++)o["f"+l]=111+l;function i(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map((function(e){return s(e,t)})),a=function(e){return n.some((function(t){return d(t,e)}))};return null==r?a:a(r)}function s(e,t){var r=t&&t.byKey,a={},o=(e=e.replace("++","+add")).split("+"),l=o.length;for(var i in n)a[n[i]]=!1;var s=!0,d=!1,f=void 0;try{for(var h,m=o[Symbol.iterator]();!(s=(h=m.next()).done);s=!0){var p=h.value,v=p.endsWith("?")&&p.length>1;v&&(p=p.slice(0,-1));var g=u(p),E=n[g];1!==l&&E||(r?a.key=g:a.which=c(p)),E&&(a[E]=!v||null)}}catch(e){d=!0,f=e}finally{try{!s&&m.return&&m.return()}finally{if(d)throw f}}return a}function d(e,t){for(var r in e){var n=e[r],a=void 0;if(null!=n&&((null!=(a="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&a!==n))return!1}return!0}function c(e){return e=u(e),o[e]||e.toUpperCase().charCodeAt(0)}function u(e){return e=e.toLowerCase(),e=a[e]||e}t.TB=function(e,t){return i(e,{byKey:!0},t)}}}]);